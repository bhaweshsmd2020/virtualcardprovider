import{j as k,T as V,k as q,x as z,o as a,c as o,a as P,u as r,b as t,l as c,t as e,F as h,r as x,h as u,p as G,f as M,Z as $,n as B,P as w,w as L,e as p,v as T,O as A}from"./app-8b08b02b.js";import{_ as I}from"./BlankLayout-cbe2cedd.js";import{s as O}from"./sharedComposable-7773727f.js";import"./ToastrContainer-e495c250.js";import"./toastComposable-d43a11ef.js";const U={class:"payment-container"},j={class:"payment-content"},F={class:"payment-header"},Y={alt:"logo",class:"block h-[30px] dark:hidden"},E={alt:"logo",class:"hidden h-[30px] dark:block"},Z={class:"status"},H={class:"gateways"},J=["onClick"],K=t("svg",{class:"active-gateway",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24"},[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})],-1),Q=[K],R=["id"],W=["onSubmit"],X={class:"payment-table"},tt={class:"text-center"},et={key:0},nt={class:"text-center"},st={key:1},lt={class:"text-center"},at={class:"text-center"},ot={class:"payment-label text-secondary-700"},it={class:"text-secondary-700"},dt={key:1},rt={class:"payment-label text-secondary-700"},ct={class:"payment-file-input"},ut={class:"payment-label text-secondary-700"},mt={class:"payment-label text-secondary-700"},ht=["disabled"],pt=t("br",null,null,-1),_t={class:"payment-invoice"},yt={class:"payment-border"},bt=t("br",null,null,-1),vt=t("br",null,null,-1),ft={class:"payment-border"},gt=t("br",null,null,-1),kt=t("br",null,null,-1),Ct=t("br",null,null,-1),Pt={class:"payment-details"},xt={class:"payment-table"},wt={class:"text-center"},Tt={class:"text-center"},St={class:"text-center"},Dt={class:"text-center"},Nt={class:"text-center"},Vt={class:"text-center"},qt=M({layout:I}),Lt=Object.assign(qt,{__name:"Payment",props:["plan","gateways","tax","total_month","sub_total","total","invoice_data","user","logo"],setup(l){var C;const{formatCurrency:m}=O(),b=l,_=k(((C=b.gateways[0])==null?void 0:C.id)||0),v=k(null),y=k({image:null,comment:""}),S=V({}),D=n=>{const i=b.gateways.find(f=>f.id===n);A.post(route("user.subscription.subscribe"),{gateway_id:n,plan_id:b.plan.id,manualPayment:i.is_auto==0?y.value:null,phone:i.phone_required==1?v.value:null})},N=n=>{_.value=n};return(n,i)=>{const f=q("Link"),g=z("lazy");return a(),o(h,null,[P(r($),{title:n.trans("Payment")},null,8,["title"]),t("div",U,[t("div",j,[t("div",F,[c(t("img",Y,null,512),[[g,n.$page.props.primaryData.deep_logo]]),c(t("img",E,null,512),[[g,n.$page.props.primaryData.logo]]),t("span",Z,e(n.trans("Unpaid")),1)]),t("div",H,[(a(!0),o(h,null,x(l.gateways,s=>(a(),o("button",{key:s.id,onClick:d=>N(s.id),class:B({"payment-border":_.value==s.id})},[c(t("div",null,Q,512),[[w,_.value==s.id]]),c(t("img",null,null,512),[[g,s.logo]])],10,J))),128))]),(a(!0),o(h,null,x(l.gateways,s=>c((a(),o("div",{key:s.id,class:"gateway-form",id:"gateway-form"+s.id},[t("form",{method:"post",onSubmit:L(d=>D(s.id),["prevent"]),enctype:"multipart/form-data"},[t("table",X,[t("tr",null,[t("td",null,e(n.trans("Method Name: ")),1),t("td",tt,e(s.name),1)]),s.currency!=null?(a(),o("tr",et,[t("td",null,e(n.trans("Gateway Currency: ")),1),t("td",nt,e(s.currency),1)])):p("",!0),s.charge!=0?(a(),o("tr",st,[t("td",null,e(n.trans("Gateway Charge: ")),1),t("td",lt,e(r(m)(s.charge)),1)])):p("",!0),t("tr",null,[t("td",null,e(n.trans("Payable Amount: ")),1),t("td",at,e(r(m)(l.total*s.multiply+s.charge)),1)])]),s.comment!=null?(a(),o(h,{key:0},[t("p",ot,[t("b",null,e(n.trans("Payment Instruction: ")),1)]),t("p",it,e(s.comment),1)],64)):p("",!0),s.phone_required==1?(a(),o("div",dt,[t("label",rt,[t("b",null,e(n.trans("Your phone number")),1)]),c(t("input",{type:"tel",name:"phone",placeholder:"Your phone number",class:"payment-input rounded-md py-1.5",required:"","onUpdate:modelValue":i[0]||(i[0]=d=>v.value=d)},null,512),[[T,v.value]])])):p("",!0),s.is_auto==0?(a(),o(h,{key:2},[t("div",ct,[t("label",ut,[t("b",null,e(n.trans("Submit your payment proof")),1)]),t("input",{onInput:i[1]||(i[1]=d=>{y.value.image=d.target.files[0]}),type:"file",name:"image",required:"",accept:"image/*"},null,32)]),t("div",null,[t("label",mt,[t("b",null,e(n.trans("Comment")),1)]),c(t("textarea",{class:"payment-textarea","onUpdate:modelValue":i[2]||(i[2]=d=>y.value.comment=d),required:"",name:"comment",placeholder:"comment",maxlength:"500"},null,512),[[T,y.value.comment]])])],64)):p("",!0),t("button",{disabled:r(S).processing,type:"submit",class:"payment-pay-btn"},e(n.trans("Pay Now")),9,ht)],40,W)],8,R)),[[w,_.value===s.id]])),128)),pt,t("div",_t,[t("div",yt,[t("b",null,e(n.trans("Invoiced To")),1),bt,u(" "+e(l.user.name),1),vt,u(" "+e(l.user.address),1)]),t("div",ft,[t("b",null,e(n.trans("Pay To")),1),gt,u(" "+e(l.invoice_data.company_name)+" ",1),kt,u(" "+e(l.invoice_data.address)+", "+e(l.invoice_data.city)+" ",1),Ct,u(" "+e(l.invoice_data.post_code)+", "+e(l.invoice_data.country),1)])]),t("div",Pt,[t("table",xt,[t("tr",wt,[t("td",null,[t("b",null,e(n.trans("Description")),1)]),t("td",null,[t("b",null,e(n.trans("Amount")),1)])]),t("tr",null,[t("td",null,e(l.plan.title),1),t("td",Tt,e(l.plan.price_format),1)]),t("tr",null,[t("td",null,e(n.trans("Months"))+":",1),t("td",St,e(l.total_month),1)]),t("tr",null,[t("td",null,e(n.trans("Sub Total"))+":",1),t("td",Dt,e(r(m)(l.sub_total)),1)]),t("tr",null,[t("td",null,e(n.trans("Tax"))+":",1),t("td",Nt,e(r(m)(l.tax)),1)]),t("tr",null,[t("td",null,e(n.trans("Total"))+" :",1),t("td",Vt,e(r(m)(l.total)),1)])])]),P(f,{href:"/user/subscription",class:"payment-cancel-btn"},{default:G(()=>[u(e(n.trans("Cancel Payment")),1)]),_:1})])])],64)}}});export{Lt as default};
