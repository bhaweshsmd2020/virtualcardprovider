import{_ as A}from"./UserLayout-5a6919f2.js";import{P as L}from"./PageHeader-8abf30c3.js";import{i as v,g as o,k as g,o as d,c as f,a as i,u as a,b as t,t as s,F as M,r as B,d as S,f as O,p as x,h as $,n as j}from"./app-55c25e51.js";import{_ as R}from"./OverviewGrid-646656c7.js";import{P as z}from"./Paginate-d3bcd4a4.js";import{d as y}from"./drawer-fe4c5e1a.js";import{_ as D}from"./NoDataFound-c4885428.js";import{_ as F}from"./FilterDropdown-df98b38e.js";import{s as H}from"./sharedComposable-713147fd.js";import{h as V}from"./moment-a9aaa855.js";import{S as _}from"./sweetalert2.esm.all-df3a4912.js";import"./dropdown-8ee40221.js";import"./Modal-522ea419.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-869d906f.js";import"./toastComposable-bc1f97e9.js";import"./SpinnerBtn-5f5f7277.js";const Y={class:"container flex-grow p-4 sm:p-6"},E={class:"space-y-4"},I={class:"table-responsive whitespace-nowrap rounded-primary"},N={class:"table"},U={class:"!text-right"},q={key:0},G={class:"capitalize"},J={class:"flex justify-end"},K={class:"dropdown","data-placement":"bottom-start"},Q={class:"dropdown-toggle"},W={class:"dropdown-content w-40"},X={class:"dropdown-list"},Z={class:"dropdown-list-item"},tt=O({layout:A}),bt=Object.assign(tt,{__name:"TopUp",props:["segments","topUps","request","totalTopUps","totalAmount","totalApprovedTopUps","totalRejectedTopUps","type"],setup(u){v(()=>{y.init();const r=new URLSearchParams(window.location.search),w=r.get("success"),p=r.get("buttonmes"),h=r.get("redirect")||"/user/account";if(w){_.fire({icon:"success",title:`<h2 style='font-size: 20px;'>${w}</h2>`,confirmButtonText:`${p}`,allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:c=>{const l=document.createElement("button");l.innerHTML="&times;",l.classList.add("swal-close-btn"),l.onclick=()=>_.close(),c.appendChild(l)}}).then(c=>{c.isConfirmed&&(window.location.href=h)});const n=new URL(window.location.href);n.searchParams.delete("success"),n.searchParams.delete("redirect"),window.history.replaceState({},document.title,n)}const e=r.get("error");if(e){_.fire({icon:"error",title:`<h2 style='font-size: 20px;'>${e}</h2>`,confirmButtonText:"Okay",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:c=>{const l=document.createElement("button");l.innerHTML="&times;",l.classList.add("swal-close-btn"),l.onclick=()=>_.close(),c.appendChild(l)}});const n=new URL(window.location.href);n.searchParams.delete("error"),window.history.replaceState({},document.title,n)}}),v(()=>{y.init()});const{formatCurrency:b,trim:k,badgeClass:C}=H(),m=u,T=[{value:m.totalTopUps,title:o("Total"),iconClass:"bx bx-badge-check"},{value:b(m.totalAmount||0),title:o("Total Amount"),iconClass:"bx bx-dollar-circle"},{value:m.totalApprovedTopUps,title:o("Completed Topup"),iconClass:"bx bx-check"},{value:m.totalRejectedTopUps,title:o("Declined Topup"),iconClass:"bx bx-x-circle"}],P=[{value:"invoice_no",label:"invoice"},{value:"amount",label:"Amount"},{label:"Status",value:"status",options:[{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"}]}];return(r,w)=>{const p=g("Link"),h=g("Icon");return d(),f("main",Y,[i(L,{title:a(o)("Card Topup History"),buttons:r.buttons},null,8,["title","buttons"]),t("div",E,[i(R,{items:T}),i(F,{options:P}),t("div",I,[t("table",N,[t("thead",null,[t("tr",null,[t("th",null,s(a(o)("Invoice")),1),t("th",null,s(a(o)("Payment Method")),1),t("th",null,s(a(o)("For")),1),t("th",null,s(a(o)("Amount")),1),t("th",null,s(a(o)("Status")),1),t("th",null,s(a(o)("Created At")),1),t("th",U,s(a(o)("Action")),1)])]),u.topUps.total?(d(),f("tbody",q,[(d(!0),f(M,null,B(u.topUps.data,e=>{var n;return d(),f("tr",{key:e.id},[t("td",null,[i(p,{href:"/user/credit-card/topupdetails/"+e.id,class:"text-sm font-medium text-primary-500 transition duration-150 ease-in-out hover:underline"},{default:x(()=>[$(s(e.invoice_no),1)]),_:2},1032,["href"])]),t("td",null,s(((n=e==null?void 0:e.gateway)==null?void 0:n.name)||"balance"),1),t("td",G,s(a(k)(e.type)),1),t("td",null,s(a(b)(e.amount)),1),t("td",null,[t("div",{class:j(["capitalize",a(C)(e.status)])},s(e.status),3)]),t("td",null,s(a(V)(e.created_at).format("DD MMM, YYYY")),1),t("td",null,[t("div",J,[t("div",K,[t("div",Q,[i(h,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),t("div",W,[t("ul",X,[t("li",Z,[i(p,{href:"/user/credit-card/topupdetails/"+e.id,class:"dropdown-link"},{default:x(()=>[i(h,{class:"h-6",icon:"fe:eye"}),t("span",null,s(a(o)("View")),1)]),_:2},1032,["href"])])])])])])])])}),128))])):(d(),S(D,{key:1,"for-table":"true"}))])]),i(z,{links:u.topUps.links},null,8,["links"])])])}}});export{bt as default};
