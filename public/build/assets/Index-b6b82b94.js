import{D,g as s,O as h,j as C,T as g,o as d,c as u,a as m,b as e,l as v,P as x,t as n,u as i,h as y,w as k,e as S,f as B}from"./app-55c25e51.js";import{_ as P}from"./AdminLayout-d7dc3a0b.js";import{P as V}from"./PageHeader-8abf30c3.js";import{S as w}from"./SpinnerBtn-5f5f7277.js";import"./dropdown-8ee40221.js";import"./moment-a9aaa855.js";import"./sharedComposable-713147fd.js";import"./toastComposable-bc1f97e9.js";import"./Modal-522ea419.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-869d906f.js";const K=D({state:!1,link:null,method:"delete",data:null,confirm_text:null,message:null,accept_btn_text:null,reject_btn_text:null,callback:null,init(a=null,{method:l,data:c={},options:t={},callback:r}){this.link=a,this.message=(t==null?void 0:t.message)||this.message,this.confirm_text=(t==null?void 0:t.confirm_text)||s("Are you sure?"),this.accept_btn_text=(t==null?void 0:t.accept_btn_text)||"Yes, Confirm!",this.reject_btn_text=(t==null?void 0:t.reject_btn_text)||"No, Cancel!",r instanceof Function&&(this.callback=r),l&&c&&(this.method=l,this.data=c),this.state=!0},initCallback(a,l={}){this.init(null,{callback:a,options:l})},async accept(){const a=["post","put","patch","delete"],{method:l,link:c,data:t,callback:r}=this;c&&a.includes(l)&&(l=="delete"?h.delete(c):h[l](c,t)),c&&!a.includes(l)&&h.delete(c),r instanceof Function&&r(),this.state=!1},reset(){Object.assign(this,{link:null,state:!1,method:"delete",data:null,message:"You want to delete this?",confirm_text:s("Are you sure?"),accept_btn_text:"Yes, delete it!",reject_btn_text:"No, Cancel!"})}}),O={class:"flex-grow p-4 sm:p-6"},U={class:"space-y-6"},A={class:"mb-5 alert alert-outline-danger",role:"alert"},F=e("i",{width:"1rem",height:"1rem","data-feather":"alert-triangle"},null,-1),Y={class:"alert alert-info",role:"alert"},$=e("i",{width:"1rem",height:"1rem","data-feather":"alert-circle"},null,-1),z={class:"card"},E={class:"card-body"},I={class:"flex justify-between"},M={class:"card-title"},T={class:"card-body"},q={key:0,class:"flex items-center justify-between p-4 my-3 border rounded-lg"},H={class:"mb-2"},G={for:""},J=["value"],L={class:"mb-2"},Q={key:0,class:"alert alert-info",role:"alert"},R=e("i",{width:"1rem",height:"1rem","data-feather":"alert-circle"},null,-1),W=B({layout:P}),de=Object.assign(W,{__name:"Index",props:["version","purchaseKey","updateData"],setup(a){var _;const l=a,c=C(!1),t=g({purchase_key:l.purchaseKey}),r=g({version:(_=l.updateData)==null?void 0:_.version}),N=()=>{t.post(route("admin.update.store"),{onError:o=>{console.log(o)}})},j=()=>{K.init(null,{options:{message:s("Before send a request for update please take a backup of your site with database"),confirm_text:s("Note"),accept_btn_text:s("Proceed for update"),reject_btn_text:s("Cancel")},callback:()=>{c.value=!0}})};return(o,X)=>{var f,p,b;return d(),u("main",O,[m(V),e("div",U,[v(e("div",A,[F,e("p",null,n(o.$page.props.flash),1)],512),[[x,((f=o.$page.props.flash)==null?void 0:f.length)!=0]]),v(e("div",Y,[$,e("p",null,[e("b",null,n(i(s)("Note"))+":",1),y(" "+n((p=a.updateData)==null?void 0:p.message),1)])],512),[[x,(b=a.updateData)==null?void 0:b.message]]),e("div",z,[e("div",E,[e("div",I,[e("h4",M,n(i(s)("Site Update")),1),e("p",null,n(i(s)("Current Version"))+" "+n(a.version),1)]),e("div",T,[a.updateData?(d(),u("div",q,[e("p",null,n(i(s)("Update Available")),1),e("h6",null,n(a.updateData.version),1),e("div",null,[e("form",{onSubmit:k(j,["prevent"])},[m(w,{processing:i(r).processing,"btn-text":i(s)("Update Now")},null,8,["processing","btn-text"])],32)])])):(d(),u("form",{key:1,onSubmit:k(N,["prevent"])},[e("div",H,[e("label",G,n(i(s)("Purchase Key")),1),e("input",{type:"text",class:"input",value:a.purchaseKey,disabled:""},null,8,J)]),e("div",L,[m(w,{processing:i(t).processing,"btn-text":i(s)("Check New Update")},null,8,["processing","btn-text"])])],32))])])]),a.updateData?S("",!0):(d(),u("div",Q,[R,e("p",null,[e("b",null,n(i(s)("Note"))+":",1),y(" "+n(i(s)("If you have customized the script from codebase do not use this option. you will lose your customization.")),1)])]))])])}}});export{de as default};
