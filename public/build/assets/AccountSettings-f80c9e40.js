import{j as F,T as k,o as p,c as m,a as i,b as e,w as C,t as a,u as s,h as g,l as d,v as f,F as O,e as v,p as B,P as E,R as L,f as N,O as U,g as l,q as M}from"./app-8b08b02b.js";import{I as _}from"./InputFieldError-6ed24b50.js";import{_ as P}from"./UserLayout-90970d6e.js";import"./toastComposable-d43a11ef.js";import{P as H}from"./PageHeader-f9559e85.js";import{S}from"./SpinnerBtn-92ab3ac7.js";import{S as b}from"./sweetalert2.esm.all-df3a4912.js";import"./dropdown-dfddaeee.js";import"./moment-a9aaa855.js";import"./sharedComposable-7773727f.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";const q={class:"container flex-grow p-4 sm:p-6"},z={class:"space-y-6"},D={class:"mx-auto max-w-4xl"},j={class:"mt-4 grid grid-cols-2 gap-5"},I={class:"w-full"},$={class:"label mb-1"},G=e("span",{class:"text-red-600"},"*",-1),J={class:"w-full"},R={class:"label mb-1"},W={class:"label mb-1"},K=e("span",{class:"text-red-600"},"*",-1),Q={class:"label mb-1"},X=e("span",{class:"text-red-600"},"*",-1),Y={class:"label mb-1"},Z=e("span",{class:"text-red-600"},"*",-1),ee={key:0,class:"text-sm"},se={class:"card card-body my-10"},te={class:"mb-4"},oe={key:0,class:"flex flex-col items-center gap-5 lg:flex-row"},le={class:"flex flex-col items-center"},ae=["innerHTML"],ne={class:"text-sm"},ie={class:"flex w-full flex-col gap-3"},re={class:"list-inside list-decimal space-y-1 text-sm"},ce={class:"input-group"},de={class:"w-full text-end"},ue={class:"flex flex-col items-center justify-between gap-2 lg:flex-row"},pe={class:"flex items-center text-sm md:text-base"},me={class:"mr-1"},ge=e("i",{class:"bx bx-link-external"},null,-1),fe=L('<div class="flex items-center gap-2"><a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2" target="_blank"><img class="w-32" src="/assets/images/google_play.png" alt="google_play"></a><a href="https://apps.apple.com/us/app/google-authenticator/id388497605" target="_blank"><img class="w-32" src="/assets/images/apple_store.png" alt="apple_store"></a></div>',1),_e={class:"mt-3"},be=N({layout:P}),Be=Object.assign(be,{__name:"AccountSettings",props:["user","google2fa"],setup(u){var y;const r=u,h=F(!1),o=k({first_name:r.user.first_name,last_name:r.user.last_name,email:r.user.email,phone:r.user.phone,current_password:""}),T=()=>{let c=route("user.account-settings.update");o.put(c,{preserveState:!0,onSuccess:()=>{function t(){b.fire({icon:"success",title:"<h2 style='font-size: 20px;'>Profile has been updated successfully</h2>",confirmButtonText:"Continue",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:n=>{const x=document.createElement("button");x.innerHTML="&times;",x.classList.add("swal-close-btn"),x.onclick=()=>b.close(),n.appendChild(x)}})}t(),o.current_password=""}})},w=k({one_time_password:"",secret:(y=r.google2fa)==null?void 0:y.secret}),A=()=>{w.post("/user/google2fa/authenticate",{preserveScroll:!0},{onSuccess:()=>{b.fire({icon:"success",title:"<h2 style='font-size: 20px;'>Two-factor authentication has been enabled</h2>",confirmButtonText:"Okay",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:c=>{const t=document.createElement("button");t.innerHTML="&times;",t.classList.add("swal-close-btn"),t.onclick=()=>b.close(),c.appendChild(t)}})}})},V=()=>{U.post("/user/google2fa/disable",{},{onSuccess:()=>{b.fire({icon:"success",title:"<h2 style='font-size: 20px;'>Two-factor authentication has been disabled</h2>",confirmButtonText:"Okay",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:c=>{const t=document.createElement("button");t.innerHTML="&times;",t.classList.add("swal-close-btn"),t.onclick=()=>b.close(),c.appendChild(t)}})}})};return(c,t)=>(p(),m("main",q,[i(H,{title:"Account Settings",buttons:[]}),e("div",z,[e("div",D,[e("form",{class:"card card-body",onSubmit:C(T,["prevent"]),method:"post"},[e("h4",null,a(s(l)("Edit Profile")),1),e("div",j,[e("div",I,[e("label",$,[g(a(s(l)("First Name"))+" ",1),G]),d(e("input",{class:"input",type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>s(o).first_name=n),placeholder:"John"},null,512),[[f,s(o).first_name]]),i(_,{message:s(o).errors.first_name},null,8,["message"])]),e("div",J,[e("label",R,a(s(l)("Last Name")),1),d(e("input",{class:"input",type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>s(o).last_name=n),placeholder:"Doe",required:""},null,512),[[f,s(o).last_name]]),i(_,{message:s(o).errors.last_name},null,8,["message"])]),e("div",null,[e("label",W,[g(a(s(l)("Phone Number"))+" ",1),K]),d(e("input",{class:"input",type:"tel","onUpdate:modelValue":t[2]||(t[2]=n=>s(o).phone=n),placeholder:"+810 989 989 989"},null,512),[[f,s(o).phone]]),i(_,{message:s(o).errors.phone},null,8,["message"])]),!r.user.provider&&!r.user.provider_id?(p(),m(O,{key:0},[e("div",null,[e("label",Q,[g(a(s(l)("Email"))+" ",1),X]),d(e("input",{class:"input",type:"email","onUpdate:modelValue":t[3]||(t[3]=n=>s(o).email=n),placeholder:"zubayerhasan@gmal.com"},null,512),[[f,s(o).email]]),i(_,{message:s(o).errors.email},null,8,["message"])]),e("div",null,[e("label",Y,[g(a(s(l)("Current Password"))+" ",1),Z]),d(e("input",{class:"input",type:"password","onUpdate:modelValue":t[4]||(t[4]=n=>s(o).current_password=n),placeholder:"enter your current password"},null,512),[[f,s(o).current_password]]),i(_,{message:s(o).errors.current_password},null,8,["message"])])],64)):v("",!0)]),i(S,{type:"submit",processing:s(o).processing,class:"btn btn-primary mb-4 mt-6","btn-text":s(l)("Update Information")},null,8,["processing","btn-text"]),!r.user.provider&&!r.user.provider_id?(p(),m("div",ee,[g(a(s(l)("Want to change the password?"))+" ",1),i(s(M),{href:c.route("user.change-password"),class:"font-medium text-primary-800"},{default:B(()=>[g(a(s(l)("Click here")),1)]),_:1},8,["href"])])):v("",!0)],32),e("div",se,[e("h4",te,a(s(l)("Two Factor Authentication")),1),h.value&&!u.google2fa.enabled?(p(),m("div",oe,[e("div",le,[e("div",{class:"scale-90 overflow-hidden rounded border",innerHTML:u.google2fa.qrCodeUrl},null,8,ae),e("p",ne,a(u.google2fa.secret),1)]),e("div",ie,[e("div",null,[e("strong",null,a(s(l)("Steps"))+": ",1),e("ol",re,[e("li",null,a(s(l)("Scan the qr code to register your Google Authenticator")),1),e("li",null,a(s(l)("Enter the one time password to confirm the registration")),1)])]),e("form",{onSubmit:C(A,["prevent"]),class:"w-full"},[e("div",ce,[d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>s(w).one_time_password=n),type:"text",class:"input",placeholder:"Enter one time password"},null,512),[[f,s(w).one_time_password]]),i(S,{type:"submit",processing:s(w).processing,class:"btn btn-primary","btn-text":s(l)("Verify")},null,8,["processing","btn-text"])]),i(_,{message:s(w).errors.one_time_password},null,8,["message"])],32),e("div",de,[d(e("button",{type:"button",class:"btn btn-dark w-full",onClick:t[6]||(t[6]=n=>h.value=!1)},a(s(l)("Close")),513),[[E,h.value]])]),e("div",ue,[e("p",pe,[e("span",me,a(s(l)("Google Authenticator App")),1),ge]),fe])])])):v("",!0),e("div",_e,[u.google2fa.enabled?(p(),m("button",{key:0,type:"button",onClick:V,class:"btn btn-danger"},a(s(l)("Disable Two Factor Authentication")),1)):!h.value&&!u.google2fa.enabled?(p(),m("button",{key:1,type:"button",class:"btn btn-dark",onClick:t[7]||(t[7]=n=>h.value=!0)},a(s(l)("Enable Two Factor Authentication")),1)):v("",!0)])])])])]))}});export{Be as default};
