import{i as Z,g as a,T as y,j as ee,k as B,o as r,c as m,b as e,a as p,u as t,t as l,F as _,r as w,d as E,e as g,w as I,l as u,v as b,n as L,m as z,f as te,p as x,h as Y}from"./app-55c25e51.js";import{_ as se}from"./AdminLayout-d7dc3a0b.js";import{P as le}from"./PageHeader-8abf30c3.js";import{_ as ae}from"./OverviewGrid-646656c7.js";import{P as ne}from"./Paginate-d3bcd4a4.js";import{d as C}from"./drawer-fe4c5e1a.js";import{_ as oe}from"./NoDataFound-c4885428.js";import{_ as de}from"./FilterDropdown-df98b38e.js";import{s as ie}from"./sharedComposable-713147fd.js";import{h as re}from"./moment-a9aaa855.js";import{S as R}from"./SpinnerBtn-5f5f7277.js";import{t as ue}from"./toastComposable-bc1f97e9.js";import"./dropdown-8ee40221.js";import"./Modal-522ea419.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-869d906f.js";const ce={class:"container flex-grow p-4 sm:p-6"},me={class:"space-y-4"},pe={class:"table-responsive whitespace-nowrap rounded-primary"},be={class:"table"},_e={class:"!text-right"},he={key:0},ve={class:"text-center"},fe={class:"flex justify-end"},ye={class:"dropdown","data-placement":"bottom-start"},we={class:"dropdown-toggle"},ge={class:"dropdown-content w-40"},xe={class:"dropdown-list"},Ce={class:"dropdown-list-item"},ke={id:"cardholderDataDrawer",class:"drawer drawer-right"},Oe={class:"drawer-header"},Ue=e("button",{type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},[e("i",{"data-feather":"x",width:"1.5rem",height:"1.5rem"})],-1),De={class:"drawer-body space-y-2"},Se={class:"label mb-1"},Pe={class:"label mb-1"},Ve={class:"label mb-1"},Ne={class:"label mb-1"},qe={class:"label mb-1"},Ae={class:"label mb-1"},je={class:"drawer-footer"},Me={class:"flex justify-between gap-2"},Fe={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},Te={id:"manualOrderDrawer",class:"drawer drawer-right"},$e={class:"drawer-header"},Be=e("button",{type:"button",class:"btn btn-danger","data-dismiss":"drawer"},[e("i",{class:"bx bx-x text-lg"})],-1),Ee={class:"drawer-body space-y-2"},Ie={class:"flex items-end gap-2"},Le={class:"label mb-1"},ze={key:0,class:"text-sm text-red-500"},Ye={class:"label mb-1"},Re=e("option",{value:"null",selected:"",disabled:""},"Select",-1),He=["value"],Ge={class:"label mb-1"},Je={value:"null",selected:"",disabled:""},Ke=["value"],Qe={class:"label mb-1"},We={class:"label mb-1"},Xe={class:"drawer-footer"},Ze={class:"flex justify-between gap-2"},et={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},tt=te({layout:se}),ft=Object.assign(tt,{__name:"Index",props:["orders","request","totalOrders","totalPendingOrders","totalApprovedOrders","totalRejectedOrders","type","buttons","cardholderData","cards","gateways","findUser"],setup(d){var O,U,D,S,P,V;Z(()=>{C.init()});const{formatCurrency:H,badgeClass:G}=ie(),c=d,J=[{value:c.totalOrders,title:a("Total Orders"),iconClass:"bx bx-badge-check"},{value:c.totalPendingOrders,title:a("Pending Orders"),iconClass:"bx bx-badge"},{value:c.totalApprovedOrders,title:a("Completed Orders"),iconClass:"bx bx-check"},{value:c.totalRejectedOrders,title:a("Declined Orders"),iconClass:"bx bx-x-circle"}],o=y({address_line:(O=c.cardholderData)==null?void 0:O.address_line,city:(U=c.cardholderData)==null?void 0:U.city,postal_code:(D=c.cardholderData)==null?void 0:D.postal_code,state:(S=c.cardholderData)==null?void 0:S.state,country:(P=c.cardholderData)==null?void 0:P.country,phone:((V=c.cardholderData)==null?void 0:V.phone)||"+18888675309"}),i=y({user_id:null,card_id:null,gateway_id:null,payment_id:null,amount:0}),h=y({user:""}),k=ee(!1),K=()=>{k.value=!0,h.get(route("admin.card-orders.index"),{preserveState:!0,onSuccess:()=>{i.user_id=null}})},Q=()=>{i.post(route("admin.card-orders.store"),{onSuccess:()=>{C.of("#manualOrderDrawer").hide()}})};function W(v,n){o.put(route("admin.option.update",v),{onSuccess:()=>{ue.success("Option Updated successfully"),C.of(n).hide()}})}const X=[{label:"Order No",value:"invoice_no"},{label:"Card Title",value:"card_title"},{label:"User Email",value:"user_email"},{label:"Status",value:"status",options:[{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"},{label:"Active",value:"active"}]}];return(v,n)=>{var q,A,j;const f=B("Link"),N=B("Icon");return r(),m(_,null,[e("main",ce,[p(le,{title:t(a)("Order List"),buttons:d.buttons},null,8,["title","buttons"]),e("div",me,[p(ae,{items:J}),p(de,{options:X}),e("div",pe,[e("table",be,[e("thead",null,[e("tr",null,[e("th",null,l(t(a)("Order No")),1),e("th",null,l(t(a)("Card Name")),1),e("th",null,l(t(a)("Prepaid Card")),1),e("th",null,l(t(a)("User Name")),1),e("th",null,l(t(a)("Payment Mode")),1),e("th",null,l(t(a)("Amount")),1),e("th",null,l(t(a)("Status")),1),e("th",null,l(t(a)("Created At")),1),e("th",_e,l(t(a)("Actions")),1)])]),d.orders.total?(r(),m("tbody",he,[(r(!0),m(_,null,w(d.orders.data,s=>{var M,F,T;return r(),m("tr",{key:s.id},[e("td",null,[p(f,{href:"/admin/card-orders/"+s.id,class:"text-sm font-medium text-primary-500 transition duration-150 ease-in-out hover:underline"},{default:x(()=>[Y(l(s.invoice_no),1)]),_:2},1032,["href"])]),e("td",null,l((M=s==null?void 0:s.card)==null?void 0:M.title),1),e("td",null,l(((F=s==null?void 0:s.credit_card)==null?void 0:F.card)||t(a)("N/A")),1),e("td",null,[p(f,{class:"underline",href:v.route("admin.users.show",(T=s==null?void 0:s.user)==null?void 0:T.id)},{default:x(()=>{var $;return[Y(l(($=s==null?void 0:s.user)==null?void 0:$.name),1)]}),_:2},1032,["href"])]),e("td",null,l(s.gateway.name),1),e("td",null,l(t(H)(s.amount)),1),e("td",null,[e("div",{class:L(["badge capitalize",t(G)(s.status)])},l(s.status),3)]),e("td",ve,l(t(re)(s.created_at).format("DD MMM, YYYY")),1),e("td",null,[e("div",fe,[e("div",ye,[e("div",we,[p(N,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),e("div",ge,[e("ul",xe,[e("li",Ce,[p(f,{href:"/admin/card-orders/"+s.id,class:"dropdown-link"},{default:x(()=>[p(N,{class:"h-6",icon:"fe:eye"}),e("span",null,l(t(a)("View")),1)]),_:2},1032,["href"])])])])])])])])}),128))])):(r(),E(oe,{key:1,"for-table":"true"}))])]),d.orders.data.length!=0?(r(),E(ne,{key:0,links:d.orders.links},null,8,["links"])):g("",!0)])]),e("div",ke,[e("form",{method:"POST",onSubmit:n[6]||(n[6]=I(s=>W("cardholder_data","#cardholderDataDrawer"),["prevent"]))},[e("div",Oe,[e("h5",null,l(t(a)("Edit Cardholder Info")),1),Ue]),e("div",De,[e("div",null,[e("label",Se,l(t(a)("Phone Number")),1),u(e("input",{type:"tel","onUpdate:modelValue":n[0]||(n[0]=s=>t(o).phone=s),class:"input",required:""},null,512),[[b,t(o).phone]])]),e("div",null,[e("label",Pe,l(t(a)("Address Line")),1),u(e("input",{type:"text","onUpdate:modelValue":n[1]||(n[1]=s=>t(o).address_line=s),class:"input",required:""},null,512),[[b,t(o).address_line]])]),e("div",null,[e("label",Ve,l(t(a)("Country")),1),u(e("input",{type:"text","onUpdate:modelValue":n[2]||(n[2]=s=>t(o).country=s),class:"input",required:""},null,512),[[b,t(o).country]])]),e("div",null,[e("label",Ne,l(t(a)("City")),1),u(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=s=>t(o).city=s),class:"input",required:""},null,512),[[b,t(o).city]])]),e("div",null,[e("label",qe,l(t(a)("Postal Code")),1),u(e("input",{type:"text","onUpdate:modelValue":n[4]||(n[4]=s=>t(o).postal_code=s),class:"input",required:"/"},null,512),[[b,t(o).postal_code]])]),e("div",null,[e("label",Ae,l(t(a)("State")),1),u(e("input",{type:"text","onUpdate:modelValue":n[5]||(n[5]=s=>t(o).state=s),class:"input",required:""},null,512),[[b,t(o).state]])])]),e("div",je,[e("div",Me,[e("button",Fe,[e("span",null,l(t(a)("Close")),1)]),p(R,{classes:"btn btn-primary w-full",processing:t(o).processing,"btn-text":"Update"},null,8,["processing"])])])],32)]),e("div",Te,[e("form",{method:"POST",onSubmit:I(Q,["prevent"])},[e("div",$e,[e("h5",null,l(t(a)("Create Manual Card Order")),1),Be]),e("div",Ee,[e("div",Ie,[e("div",null,[e("label",Le,l(t(a)("Email/Phone")),1),u(e("input",{type:"text","onUpdate:modelValue":n[7]||(n[7]=s=>t(h).user=s),class:"input",required:""},null,512),[[b,t(h).user]])]),e("button",{type:"button",class:"btn btn-primary",onClick:K},l(t(a)("Find User")),1)]),k.value&&!d.findUser?(r(),m("p",ze,l(t(a)("Nothing Found"))+"... ",1)):g("",!0),d.findUser?(r(),m("button",{key:1,type:"button",onClick:n[8]||(n[8]=s=>t(i).user_id=d.findUser.id),class:L(["mt-1 w-full space-y-1 border border-transparent bg-gray-100 p-2 text-left text-xs shadow-md dark:bg-gray-900",{"border-primary-600":t(i).user_id}])},[e("p",null,l(t(a)("Name"))+": "+l((q=d.findUser)==null?void 0:q.name),1),e("p",null,l(t(a)("Email"))+": "+l((A=d.findUser)==null?void 0:A.email),1),e("p",null,l(t(a)("Phone"))+": "+l((j=d.findUser)==null?void 0:j.phone),1)],2)):g("",!0),e("div",null,[e("label",Ye,l(t(a)("Select Gateway")),1),u(e("select",{class:"select capitalize","onUpdate:modelValue":n[9]||(n[9]=s=>t(i).gateway_id=s)},[Re,(r(!0),m(_,null,w(d.gateways,s=>(r(),m("option",{value:s.id,key:s.id},l(s.name),9,He))),128))],512),[[z,t(i).gateway_id]])]),e("div",null,[e("label",Ge,l(t(a)("Select Card")),1),u(e("select",{class:"select capitalize","onUpdate:modelValue":n[10]||(n[10]=s=>t(i).card_id=s)},[e("option",Je,l(t(a)("Select")),1),(r(!0),m(_,null,w(d.cards,s=>(r(),m("option",{value:s.id,key:s.id},l(s.title)+" - "+l(s.category.title),9,Ke))),128))],512),[[z,t(i).card_id]])]),e("div",null,[e("label",Qe,l(t(a)("Amount")),1),u(e("input",{type:"number","onUpdate:modelValue":n[11]||(n[11]=s=>t(i).amount=s),class:"input",required:""},null,512),[[b,t(i).amount]])]),e("div",null,[e("label",We,l(t(a)("Payment Id")),1),u(e("input",{type:"text","onUpdate:modelValue":n[12]||(n[12]=s=>t(i).payment_id=s),class:"input",required:""},null,512),[[b,t(i).payment_id]])])]),e("div",Xe,[e("div",Ze,[e("button",et,[e("span",null,l(t(a)("Close")),1)]),p(R,{classes:"btn btn-primary w-full",processing:t(o).processing,"btn-text":"Order"},null,8,["processing"])])])],32)])],64)}}});export{ft as default};
