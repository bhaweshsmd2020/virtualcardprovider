import{T as S,z as k,k as U,x as z,o,c as l,b as e,a as h,u as a,h as i,t,e as f,F as m,p as N,l as x,v as $,f as D}from"./app-8b08b02b.js";import{s as I}from"./sharedComposable-7773727f.js";import{t as P}from"./toastComposable-d43a11ef.js";import{P as A}from"./PageHeader-f9559e85.js";import{_ as R}from"./UserLayout-90970d6e.js";import{s as H}from"./multiselect-44a34510.js";import"./dropdown-dfddaeee.js";import"./moment-a9aaa855.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";const M={class:"container flex-grow p-4 sm:p-6"},O={class:"flex items-center justify-between"},q={class:"mx-auto mt-6 max-w-lg space-y-5"},G={class:"text-center text-2xl font-semibold"},J={class:"rounded-md bg-white p-2 dark:bg-secondary-900"},K={class:"mb-2"},L={class:"label text-xs"},Q={class:"multiselect-single-label"},W={class:"mr-3 flex h-8 w-8 items-center justify-center rounded-md border bg-white"},X={class:"h-5 w-5"},Y={class:"flex items-center justify-between"},Z={class:"text-sm"},ee={class:"uppercase"},se={class:"flex w-40 translate-x-[9rem] flex-col items-end"},te={class:"text-sm font-semibold uppercase leading-4"},ae={key:0,class:"text-xs"},ne={key:1,class:"text-xs"},re={class:"mr-3 flex h-8 w-8 items-center justify-center rounded-md border bg-white"},ce={class:"h-5 w-5"},oe={class:"flex items-center justify-between"},le={class:"text-sm"},ie={class:"uppercase"},de={class:"flex w-40 translate-x-[10.8rem] flex-col items-end"},ue={class:"text-sm font-semibold uppercase"},me={key:0,class:"text-xs"},_e={key:1,class:"text-xs"},pe={class:"label text-xs"},ye={class:"label text-xs"},fe={key:0,class:"uppercase"},be={class:"rounded-md bg-gray-100 p-4 dark:bg-secondary-800"},he={class:"space-y-5 text-sm"},xe={class:"flex items-center justify-between text-gray-400"},ve={class:"text-sm"},ge={class:"flex items-center justify-between text-gray-400"},we={class:"text-xs"},ke={key:0,class:"uppercase"},Ce=D({layout:R}),De=Object.assign(Ce,{__name:"Create",props:["accounts"],setup(C){const v=C,r=S({type:"",currency_id:null,amount:0,receiver_email:"",meta:{}}),{formatCurrency:_,authUser:d,calculatePercent:B}=I(),p=k(()=>r.currency_id?v.accounts.find(n=>n.currency_id==r.currency_id):null),E=k(()=>+r.amount-B(+r.amount,+d.value.plan_data.service_fee.value)),g=k(()=>{const n=v.accounts.find(c=>c.is_default===1);return n||null}),b=n=>v.accounts.find(u=>u.currency_id==n).rates.find(u=>u.virtual_currency_exchange_id===g.value.currency_id),F=()=>{if(p.value.balance<r.amount)return P.danger("Insufficient balance");r.post(route("user.withdraw.store"))};return(n,c)=>{var T,V,j;const w=U("Icon"),u=z("lazy");return o(),l("main",M,[e("div",O,[h(A,{title:"Transfer"}),a(r).type?(o(),l("button",{key:0,type:"button",onClick:c[0]||(c[0]=s=>a(r).type=""),class:"btn btn-sm btn-primary"},[h(w,{class:"text-xl",icon:"bx:chevron-left"}),i(" "+t(n.trans("Back")),1)])):f("",!0)]),e("div",q,[a(r).type?f("",!0):(o(),l(m,{key:0},[e("p",G,t(n.trans("Choose where you want to withdraw to")),1),e("button",{onClick:c[1]||(c[1]=s=>a(r).type="user"),class:"flex w-full items-center gap-3 rounded-md bg-gray-100 p-3 hover:bg-gray-200 dark:bg-secondary-800"},[e("div",J,[h(w,{class:"text-2xl",icon:"bx:user"})]),e("span",null,t(n.trans(`To ${n.$page.props.app_name} user account`)),1)])],64)),a(r).type==="user"?(o(),l(m,{key:1},[e("div",K,[e("label",L,t(n.trans("Select Account")),1),h(a(H),{onChange:c[2]||(c[2]=()=>{a(r).amount=0}),class:"multiselect-dark",searchable:!0,modelValue:a(r).currency_id,"onUpdate:modelValue":c[3]||(c[3]=s=>a(r).currency_id=s),mode:"single",label:"currency_name","value-prop":"currency_id",options:C.accounts,placeholder:"Account"},{singlelabel:N(({value:s})=>{var y;return[e("div",Q,[e("div",W,[x(e("img",X,null,512),[[u,s.preview]])]),e("div",Y,[e("p",Z,[e("span",ee,t(s.currency_name),1),i(" "+t(n.trans("account")),1)]),e("p",se,[e("span",te,t(s.balance||"0.00")+" "+t(s.currency_name),1),g.value&&b(s.currency_id)?(o(),l("small",ae,t(a(_)(((y=b(+s.currency_id))==null?void 0:y.rate)*+(s==null?void 0:s.balance),s.precision)),1)):(o(),l("small",ne,t(a(_)(+(s==null?void 0:s.balance)||0)),1))])])])]}),option:N(({option:s})=>{var y;return[e("div",re,[x(e("img",ce,null,512),[[u,s.preview]])]),e("div",oe,[e("p",le,[e("span",ie,t(s.currency_name),1),i(" "+t(n.trans("account")),1)]),e("p",de,[e("span",ue,t(s.balance||"0.00")+" "+t(s.currency_name),1),g.value&&b(s.currency_id)?(o(),l("small",me,t(a(_)(((y=b(+s.currency_id))==null?void 0:y.rate)*+(s==null?void 0:s.balance))),1)):(o(),l("small",_e,t(a(_)(+(s==null?void 0:s.balance)||0)),1))])])]}),_:1},8,["modelValue","options"])]),e("div",null,[e("label",pe,t(n.trans("To (Enter the recipient's Email)")),1),x(e("input",{type:"email","onUpdate:modelValue":c[4]||(c[4]=s=>a(r).receiver_email=s),class:"input",placeholder:"Email"},null,512),[[$,a(r).receiver_email]])]),e("div",null,[e("label",ye,[i(t(n.trans("Transfer amount"))+" ",1),(T=p.value)!=null&&T.currency_name?(o(),l("span",fe," ( "+t((V=p.value)==null?void 0:V.currency_name)+" ) ",1)):f("",!0)]),x(e("input",{type:"number",step:"any",class:"input","onUpdate:modelValue":c[5]||(c[5]=s=>a(r).amount=s),placeholder:"Transfer amount"},null,512),[[$,a(r).amount]])]),e("div",be,[e("div",he,[e("div",xe,[e("p",null,t(n.trans("Service fee")),1),e("p",ve,[a(d).plan_data.service_fee&&a(d).plan_data.service_fee.value>0?(o(),l(m,{key:0},[i(t(a(d).plan_data.service_fee.value)+" % ",1)],64)):(o(),l(m,{key:1},[i(t(n.trans("Not charged")),1)],64))])]),e("div",ge,[e("p",null,t(n.trans("Total")),1),e("p",we,[a(d).plan_data.service_fee&&a(d).plan_data.service_fee.value>0?(o(),l(m,{key:0},[i(t(E.value)+" ",1),(j=p.value)!=null&&j.currency_name?(o(),l("span",ke,t(p.value.currency_name),1)):f("",!0)],64)):(o(),l(m,{key:1},[i(t(a(_)(+a(r).amount)),1)],64))])])])]),e("button",{onClick:F,type:"button",class:"btn w-full bg-secondary-950 py-3 text-secondary-50 hover:bg-secondary-800"},t(n.trans("Continue")),1)],64)):f("",!0)])])}}});export{De as default};
