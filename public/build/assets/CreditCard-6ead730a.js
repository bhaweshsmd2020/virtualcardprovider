import{z as I,j as n,i as N,k as B,o as l,c as o,b as e,t as s,e as h,a as f,n as p,K as V,a3 as E,a4 as j}from"./app-8b08b02b.js";import{t as z}from"./toastComposable-d43a11ef.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const y=t=>(E("data-v-99440429"),t=t(),j(),t),D=y(()=>e("div",{class:"flex items-center justify-between"},[e("p",{class:"text-white text-xl"},[e("strong",null,"Prepaid Virtual Card")]),e("img",{src:"/assets/images/logo.png",class:"text-xl",alt:"Copy Icon",style:{width:"90px"}})],-1)),F={key:0},$={key:1},M=y(()=>e("img",{src:"/assets/images/copy.png",class:"text-xl",alt:"Copy Icon",style:{width:"15px"}},null,-1)),O=[M],P={class:"col-span-2"},T={class:"text-sm font-semibold lg:text-xs xl:text-sm"},W={class:"mt-2 text-xs"},q={class:"whitespace-nowrap text-sm font-semibold lg:text-xs xl:text-sm"},A={class:"mt-2 text-xs"},G={class:"mb-2 text-center text-sm font-semibold lg:text-xs xl:text-sm"},H={id:"cvc-number",class:"ml-6"},J={key:0},L={key:1},Q={class:"flex items-center justify-end"},R={__name:"CreditCard",props:{creditCard:Object,revealBtn:{type:Boolean,default:!1},stripe_pk_key:String,classes:{type:String,default:"max-w-[28rem]"}},setup(t){const r=t,_={basic:{bgColor:"bg-neutral-950/70",color:"text-dark"},pro:{bgColor:"bg-gradient-to-r",color:"text-dark"},gold:{bgColor:"bg-gradient-to-r",color:"text-dark"},silver:{bgColor:"bg-gradient-to-silver",color:"text-white"},premium:{bgColor:"bg-gradient-to-premium",color:"tex-white"}},u=I(()=>{var a,m,i,b;return _[((m=(a=r.creditCard)==null?void 0:a.virtual_card)==null?void 0:m.card_variant)||((b=(i=r.creditCard)==null?void 0:i.card)==null?void 0:b.card_variant)||"basic"]||_.basic});let g;const C=n(null);N(()=>{r.stripe_pk_key&&r.revealBtn&&(g=Stripe(r.stripe_pk_key||""),C.value=g.elements())});const k=n(r.creditCard.card),c=n(null),v=n(null),d=n(!1),x=n(!1),w=async()=>{try{if(d.value){d.value=!1,x.value=!1;return}const a=await V.get(`/user/credit-card/${r.creditCard.id}/full-details`);c.value=a.data.full_card_number.replace(/\d{4}(?=\d)/g,"$& "),v.value=a.data.card_cvv,d.value=!0,x.value=!0,C.value.create("issuingCardNumberDisplay",{issuingCard:k.value,nonce:nonce.value,ephemeralKeySecret:ephemeralKeySecret.value,style:{base:{color:"#fff",fontSize:"24px",fontWeight:600}}}).mount("#card-number")}catch(a){console.error("Error fetching card details:",a)}},S=()=>{c.value&&navigator.clipboard.writeText(c.value).then(()=>{z.success("Card number copied to clipboard!")})};return(a,m)=>{const i=B("Icon");return l(),o("div",{class:p(["relative h-64 rounded-xl p-6 shadow-lg backdrop-blur-md lg:col-span-4",[u.value.bgColor,t.classes]])},[D,e("div",{id:"card-number",class:p(["text-2xl font-semibold mt-3 flex",u.value.color])},[d.value&&c.value?(l(),o("span",F,s(c.value),1)):(l(),o("span",$,"**** **** **** "+s(t.creditCard.last4),1)),d.value&&c.value?(l(),o("span",{key:2,onClick:S,class:"mt-2 ml-1 cursor-pointer"},O)):h("",!0),t.revealBtn?(l(),o("span",{key:3,class:"mt-2 ml-1 cursor-pointer",onClick:w},[f(i,{class:"text-xl",icon:"fe:eye"})])):h("",!0)],2),e("div",{class:p(["mt-10 grid grid-cols-5 gap-2",u.value.color])},[e("div",P,[e("p",T,s(a.trans("Cardholder name")),1),e("p",W,s(t.creditCard.name_on_card),1)]),e("div",null,[e("p",q,s(a.trans("Expiry date")),1),e("p",A,s(t.creditCard.exp_month)+"/"+s(t.creditCard.exp_year),1)]),e("div",null,[e("p",G,s(a.trans("CVC")),1),e("div",H,[x.value&&v.value?(l(),o("span",J,s(v.value),1)):(l(),o("span",L,"***"))])]),e("div",Q,[f(i,{class:p(["text-7xl",u.value.color]),icon:"bx:bxl-visa"},null,8,["class"])])],2)],2)}}},Z=K(R,[["__scopeId","data-v-99440429"]]);export{Z as C};
