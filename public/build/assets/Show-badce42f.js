import{z as k,T as E,k as q,x as z,o as c,c as o,a as C,b as e,l as x,h as d,t as s,u as t,n as B,e as _,p as M,w as T,F,r as N,v as P,f as Y,g as l,bF as I}from"./app-8b08b02b.js";import{_ as O}from"./UserLayout-90970d6e.js";import{P as R}from"./PageHeader-f9559e85.js";import{t as v}from"./toastComposable-d43a11ef.js";import{s as H}from"./multiselect-44a34510.js";import{s as L}from"./sharedComposable-7773727f.js";import"./dropdown-dfddaeee.js";import"./moment-a9aaa855.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";const $={class:"container flex-grow p-4 sm:p-6"},G={class:"mx-auto space-y-4 xl:w-9/12"},J={class:"card card-body"},K={class:"my-8 flex items-start gap-x-4"},Q={class:"w-32",height:"30",alt:""},X={class:"table-responsive whitespace-nowrap rounded-primary"},Z={class:"table"},ee={class:"uppercase"},te={colspan:"4"},se={class:"card card-body space-y-2"},ae={class:"flex items-center gap-x-2"},ne={key:0,class:"my-2 w-1/2"},le={key:1,class:"my-2 w-1/2"},ce={class:"label text-xs"},oe={class:"multiselect-single-label"},re={class:"mr-3 flex h-8 w-8 items-center justify-center rounded-md border bg-white"},ie={class:"h-5 w-5"},de={class:"flex items-center justify-between"},ue={class:"text-sm"},me={class:"uppercase"},_e={class:"flex w-40 translate-x-[10rem] flex-col items-end"},he={class:"text-sm font-semibold uppercase leading-4"},pe={key:0,class:"text-xs"},ye={key:1,class:"text-xs"},be={class:"mr-3 flex h-8 w-8 items-center justify-center rounded-md border bg-white"},xe={class:"h-5 w-5"},ge={class:"flex items-center justify-between"},fe={class:"text-sm"},ve={class:"uppercase"},we={class:"flex w-40 translate-x-[11rem] flex-col items-end"},ke={class:"text-sm font-semibold uppercase"},Ce={key:0,class:"text-xs"},Ve={key:1,class:"text-xs"},We={class:"mb-6 grid grid-cols-2 gap-2"},Ae={class:"col-span-full text-lg font-semibold"},je={class:"label mb-1 capitalize"},Me=["onUpdate:modelValue","type"],Pe=["onUpdate:modelValue"],Se={class:"mb-6 flex items-center"},Ue=e("img",{class:"mr-1 w-8",src:"/assets/images/money-bag.png",height:"30",alt:"money"},null,-1),De={class:"flex items-end gap-x-2"},Ee={class:"flex-1"},qe={class:"label mb-1"},ze={key:0,class:"text-xs uppercase"},Be={key:1,class:"text-xs uppercase"},Te=["disabled","placeholder"],Fe={class:"flex-1"},Ne={class:"label mb-1"},Ye=["value"],Ie=["disabled"],Oe=e("i",{class:"bx bx-chevron-right text-white"},null,-1),Re=[Oe],He={key:0,class:"my-2 flex items-center justify-end gap-2 text-sm dark:text-gray-300"},Le={class:"uppercase"},$e={class:"uppercase"},Ge={key:0},Je={class:"uppercase"},Ke={class:"uppercase"},Qe={key:1,class:"my-2 flex items-center justify-end gap-2 text-sm dark:text-gray-300"},Xe={class:"uppercase"},Ze={class:"uppercase"},et=["disabled"],tt={key:2,class:"my-8 flex items-center gap-x-4"},st=e("img",{class:"w-16",src:"/assets/images/sorry.png",alt:"sorry"},null,-1),at=Y({layout:O}),pt=Object.assign(at,{__name:"Show",props:["method","fields","accounts"],setup(r){const m=r,{formatCurrency:g,authUser:S}=L(),i=k(()=>a.currency_id?m.accounts.find(p=>p.currency_id==a.currency_id):null),U=k(()=>a.payoutWith==="balance"?+a.amount:a.payoutWith==="wallet"&&i.value&&a.amount?(+a.amount*+m.method.rates[i.value.currency_name]).toFixed(2):0),a=E({payoutWith:"balance",amount:0,inputs:{},currency_id:""});function D(){if(parseFloat(a.amount)>(i==null?void 0:i.balance))return v.danger(l("You cant sent payout request greater then ")+(i==null?void 0:i.balance)),!1;if(a.amount<m.method.min_limit)return v.danger(l("You cant sent payout request less then ")+m.method.min_limit),!1;if(a.amount>m.method.max_limit)return v.danger(l("You cant sent payout request greater then ")+m.method.min_limit+" using this method"),!1;a.post(route("user.payout.otp",m.method.id),{onSuccess:()=>{v.danger(l("A confirmation otp has sent to your email"))}})}const h=k(()=>{const p=m.accounts.find(u=>u.is_default===1);return p||null}),f=p=>m.accounts.find(y=>y.currency_id==p).rates.find(y=>y.virtual_currency_exchange_id===h.value.currency_id);return(p,u)=>{var W,A,j;const V=q("Icon"),y=z("lazy");return c(),o("main",$,[C(R),e("div",G,[e("div",J,[e("h3",K,[x(e("img",Q,null,512),[[y,r.method.image]]),d(" "+s(t(l)("Payout method information")),1)]),e("div",X,[e("table",Z,[e("tbody",null,[e("tr",null,[e("th",null,s(t(l)("Method name")),1),e("td",null,s(r.method.name),1),e("th",null,s(t(l)("Currency")),1),e("td",ee,s(r.method.currency_name),1)]),e("tr",null,[e("th",null,s(t(l)("Minimum limit")),1),e("td",null,s(r.method.min_limit),1),e("th",null,s(t(l)("Maximum limit")),1),e("td",null,s(r.method.max_limit),1)]),e("tr",null,[e("th",null,s(t(l)("Charge type")),1),e("td",null,s(r.method.charge_type),1),e("th",null,s(t(l)("Charge")),1),e("td",null,s(r.method.charge_type=="percentage"?r.method.percent_charge+"%":r.method.fixed_charge+" "+r.method.currency_name),1)]),e("tr",null,[e("th",null,s(t(l)("Maximum Processing Time")),1),e("td",te,s(r.method.delay)+" "+s(t(l)("Days")),1)])])])])]),e("div",se,[e("p",null,s(t(l)("Select Payout From")),1),e("div",ae,[e("button",{class:B(["btn",t(a).payoutWith==="balance"?"btn-primary":"bg-gray-200 dark:bg-secondary-700"]),onClick:u[0]||(u[0]=()=>{t(a).payoutWith="balance",t(a).amount=0,t(a).currency_id=""})},[C(V,{icon:"fe:credit-card"}),d(" "+s(t(l)("Account Balance")),1)],2)]),t(a).payoutWith==="balance"?(c(),o("div",ne,s(t(l)("Balance"))+" : "+s(t(g)(t(S).balance)),1)):_("",!0),t(a).payoutWith==="wallet"?(c(),o("div",le,[e("label",ce,s(t(l)("Select Account")),1),C(t(H),{onChange:u[1]||(u[1]=()=>{t(a).amount=0}),class:"multiselect-dark",searchable:!0,modelValue:t(a).currency_id,"onUpdate:modelValue":u[2]||(u[2]=n=>t(a).currency_id=n),mode:"single",label:"currency_name","value-prop":"currency_id",options:r.accounts,placeholder:"Account"},{singlelabel:M(({value:n})=>{var b;return[e("div",oe,[e("div",re,[x(e("img",ie,null,512),[[y,n.preview]])]),e("div",de,[e("p",ue,[e("span",me,s(n.currency_name),1),d(" "+s(t(l)("account")),1)]),e("p",_e,[e("span",he,s(n.balance||"0.00")+" "+s(n.currency_name),1),h.value&&f(n.currency_id)?(c(),o("small",pe,s(t(g)(((b=f(+n.currency_id))==null?void 0:b.rate)*+(n==null?void 0:n.balance),n.precision)),1)):(c(),o("small",ye,s(t(g)(+(n==null?void 0:n.balance)||0)),1))])])])]}),option:M(({option:n})=>{var b;return[e("div",be,[x(e("img",xe,null,512),[[y,n.preview]])]),e("div",ge,[e("p",fe,[e("span",ve,s(n.currency_name),1),d(" "+s(t(l)("account")),1)]),e("p",we,[e("span",ke,s(n.balance||"0.00")+" "+s(n.currency_name),1),h.value&&f(n.currency_id)?(c(),o("small",Ce,s(t(g)(((b=f(+n.currency_id))==null?void 0:b.rate)*+(n==null?void 0:n.balance),n.precision)),1)):(c(),o("small",Ve,s(t(g)(+(n==null?void 0:n.balance)||0)),1))])])]}),_:1},8,["modelValue","options"])])):_("",!0),e("form",{method:"POST",onSubmit:T(D,["prevent"])},[e("div",We,[e("p",Ae,s(t(l)("Payout Details")),1),(c(!0),o(F,null,N(r.fields,(n,b)=>(c(),o("div",{class:"pt-2",key:b},[e("label",je,s(n.label)+" * ",1),n.type!="textarea"?x((c(),o("input",{key:0,class:"input","onUpdate:modelValue":w=>t(a).inputs[n.label]=w,type:n.type,required:""},null,8,Me)),[[I,t(a).inputs[n.label]]]):x((c(),o("textarea",{key:1,required:"",class:"textarea","onUpdate:modelValue":w=>t(a).inputs[n.label]=w},null,8,Pe)),[[P,t(a).inputs[n.label]]])]))),128))]),e("div",null,[e("h5",Se,[Ue,d(" "+s(t(l)("Enter Amount")),1)]),e("div",De,[e("div",Ee,[e("label",qe,[d(s(t(l)("Amount"))+" ",1),t(a).payoutWith=="wallet"&&t(a).currency_id?(c(),o("span",ze," ( "+s((W=i.value)==null?void 0:W.currency_name)+" ) ",1)):_("",!0),t(a).payoutWith=="balance"?(c(),o("span",Be," ( "+s((A=h.value)==null?void 0:A.currency_name)+" ) ",1)):_("",!0)]),x(e("input",{class:"input",disabled:t(a).processing,type:"number","onUpdate:modelValue":u[3]||(u[3]=n=>t(a).amount=n),step:"any",placeholder:t(l)("Enter Amount")},null,8,Te),[[P,t(a).amount]])]),e("div",Fe,[e("label",Ne,s(t(l)("Amount enrolled")),1),e("input",{disabled:"",readonly:"",value:U.value,type:"number",class:"input",placeholder:"Amount enrolled"},null,8,Ye)]),e("button",{disabled:t(a).processing||!t(a).amount,type:"submit",class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary-600 hover:bg-opacity-80 disabled:cursor-not-allowed"},Re,8,Ie)]),t(a).currency_id&&t(a).payoutWith=="wallet"?(c(),o("div",He,[e("p",null,s(t(l)("Exchange rate"))+" :",1),e("p",null,[d(" 1 "),e("span",Le,s(i.value.currency_name),1),d(" = "+s(r.method.rates[i.value.currency_name])+" ",1),e("span",$e,s(r.method.currency_name),1)]),t(a).payoutWith=="balance"?(c(),o("p",Ge,[d(" 1 "),e("span",Je,s(h.value.currency_name),1),d(" = 1 "),e("span",Ke,s(h.value.currency_name),1)])):_("",!0)])):_("",!0),t(a).payoutWith=="balance"?(c(),o("div",Qe,[e("p",null,s(t(l)("Exchange rate"))+" :",1),e("p",null,[d(" 1 "),e("span",Xe,s(h.value.currency_name),1),d(" = 1 "),e("span",Ze,s(h.value.currency_name),1)])])):_("",!0),t(a).errors.amount?(c(),o("small",{key:2,class:"text-danger",disabled:t(a).processing},s(t(a).errors.amount),9,et)):_("",!0)])],32),parseFloat(t(a).amount)>((j=i.value)==null?void 0:j.balance)?(c(),o("div",tt,[st,e("div",null,[e("h4",null,s(t(l)("I am sorry")),1),e("p",null,s(t(l)("You don't have enough balance.")),1)])])):_("",!0)])])])}}});export{pt as default};
