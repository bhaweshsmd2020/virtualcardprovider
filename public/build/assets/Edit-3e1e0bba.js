import{T as g,i as C,k as x,o as l,c as u,a as m,b as e,w,h as _,t as n,e as y,l as d,v,u as i,m as V,F as k,r as P,f as S,p as U}from"./app-8b08b02b.js";import{_ as M}from"./AdminLayout-2a0b7492.js";import{P as B}from"./PageHeader-f9559e85.js";import{S as E}from"./SpinnerBtn-92ab3ac7.js";import"./dropdown-dfddaeee.js";import"./moment-a9aaa855.js";import"./sharedComposable-7773727f.js";import"./toastComposable-d43a11ef.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";const N={class:"container flex-grow p-4 sm:p-6"},T={class:"space-y-6"},D={class:"mx-auto max-w-[800px]"},I={class:"card card-body"},L={class:"mb-2"},A={class:"label mb-1"},F={key:0,class:"text-xs font-semibold text-red-500"},H={class:"mb-2 mt-2"},R={class:"label mb-1"},j={key:0},q={class:"label mb-1"},O={value:"active"},$={value:"inactive"},z={class:"label mb-1"},G={class:"text-xs"},J={class:"col-span-full"},K={class:"card card-body grid grid-cols-2 gap-3"},Q={class:"label mb-1 uppercase"},W=["onUpdate:modelValue"],X={class:"mb-2 mt-3"},Y=S({layout:M}),ue=Object.assign(Y,{__name:"Edit",props:["rates","virtualCurrency","currencies"],setup(p){const o=p,a=g({_method:"PATCH",currency:o.virtualCurrency.currency,preview:o.virtualCurrency.preview,status:o.virtualCurrency.status,precision:o.virtualCurrency.precision,rates:[],is_default:o.virtualCurrency.is_default==1});C(()=>{var t;for(const r of o.currencies){const c=o.rates.find(s=>r.id==s.virtual_currency_exchange_id);a.rates.push({id:c?c.virtual_currency_exchange_id:r.id,currency:c?(t=c.exchange_currency)==null?void 0:t.currency:r.currency,rate:c?+c.rate:1})}});const f=()=>{a.post(route("admin.virtual-currency.update",o.virtualCurrency.id))};return(t,r)=>{const c=x("Link");return l(),u("main",N,[m(B,{title:"Edit a currency"}),e("div",T,[e("div",D,[e("form",{onSubmit:w(f,["prevent"]),class:"space-y-3"},[e("div",I,[e("div",L,[e("label",A,[_(n(t.trans("Currency"))+" ",1),p.virtualCurrency.is_default==1?(l(),u("span",F,"( "+n(t.trans("Default Currency"))+" )",1)):y("",!0)]),d(e("input",{"onUpdate:modelValue":r[0]||(r[0]=s=>i(a).currency=s),type:"text",name:"currency",required:"",class:"input"},null,512),[[v,i(a).currency]])]),e("div",H,[e("label",R,n(t.trans("Image (Preview)")),1),e("input",{onInput:r[1]||(r[1]=s=>i(a).preview=s.target.files[0]),type:"file",class:"input",name:"preview",accept:"image/*"},null,32)]),p.virtualCurrency.is_default==0?(l(),u("div",j,[e("label",q,n(t.trans("Status")),1),d(e("select",{"onUpdate:modelValue":r[2]||(r[2]=s=>i(a).status=s),class:"select",name:"status"},[e("option",O,n(t.trans("Active")),1),e("option",$,n(t.trans("Inactive")),1)],512),[[V,i(a).status]])])):y("",!0),e("div",null,[e("label",z,[_(n(t.trans("Precision"))+" ",1),e("span",G,"( "+n(t.trans("Min:2"))+" )",1)]),d(e("input",{type:"number",step:"any",placeholder:"Precision",class:"input","onUpdate:modelValue":r[3]||(r[3]=s=>i(a).precision=s)},null,512),[[v,i(a).precision]])])]),e("p",J,n(t.trans("Exchange Rate")),1),e("div",K,[(l(!0),u(k,null,P(i(a).rates,(s,b)=>(l(),u("div",{key:b},[e("label",Q,n(s.currency),1),d(e("input",{type:"number",step:"any",placeholder:"Rate",class:"input","onUpdate:modelValue":h=>s.rate=h},null,8,W),[[v,s.rate]]),m(c,{class:"text-xs hover:underline",href:t.route("admin.virtual-currency.edit",s.id)},{default:U(()=>[_(" * "+n(t.trans("update related exchange rate")),1)]),_:2},1032,["href"])]))),128))]),e("div",X,[e("div",null,[m(E,{classes:"btn btn-primary",processing:i(a).processing,"btn-text":t.trans("Update")},null,8,["processing","btn-text"])])])],32)])])])}}});export{ue as default};
