import{i as V,z as $,T as B,k as x,x as T,o as r,c,b as t,a as o,t as l,u as e,F as u,r as k,d as z,w as F,l as _,v as b,m as L,f as O,g as a,h as Y,n as j,p as y}from"./app-8b08b02b.js";import{_ as H}from"./AdminLayout-2a0b7492.js";import{P as R}from"./PageHeader-f9559e85.js";import{P as W}from"./Paginate-50e2af07.js";import{h as U}from"./moment-a9aaa855.js";import{s as q}from"./sharedComposable-7773727f.js";import{_ as G}from"./OverviewGrid-f71a88c2.js";import{S as J}from"./SpinnerBtn-92ab3ac7.js";import{d as v}from"./drawer-fe4c5e1a.js";import{_ as K}from"./NoDataFound-f8b61a7b.js";import{_ as Q}from"./FilterDropdown-576dea2b.js";import"./dropdown-dfddaeee.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";import"./toastComposable-d43a11ef.js";const X={class:"container p-4 sm:p-6"},Z={class:"space-y-6"},tt={class:"table-responsive whitespace-nowrap rounded-primary"},et={class:"table"},st={class:"text-end"},lt={key:0},at={class:"text-left"},nt={class:"flex gap-2"},ot={class:"mr-1 inline w-12 rounded-full",alt:"preview"},it=["href"],dt={class:"font-bold"},rt={key:0,class:"badge badge-primary"},ct={class:"text-left"},mt={class:""},pt={class:"dropdown","data-placement":"bottom-start"},_t={class:"dropdown-toggle"},ut={class:"dropdown-content w-40"},ht={class:"dropdown-list"},bt={class:"dropdown-list-item"},vt={class:"dropdown-list-item"},ft=["onClick"],wt={class:"dropdown-list-item"},gt={class:"dropdown-list-item"},xt=["onClick"],kt={id:"editUserDrawer",class:"drawer drawer-right"},yt={class:"drawer-header"},Ut=t("button",{type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},[t("i",{"data-feather":"x",width:"1.5rem",height:"1.5rem"})],-1),Ct={class:"drawer-body"},At={class:"mb-2"},Dt={class:"mb-2"},St={class:"mb-2"},Mt={class:"label mb-2"},Nt={value:""},Et=["value"],It={class:"mb-2"},Pt={class:"drawer-footer"},Vt={class:"flex gap-2"},$t={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},Bt=O({layout:H}),Zt=Object.assign(Bt,{__name:"Index",props:["users","plans","totalUsers","activeUsers","inactiveUsers"],setup(m){const{deleteRow:C,formatCurrency:A,uiAvatar:D}=q();V(()=>{v.init()});const h=m,S=$(()=>[{value:h.totalUsers,title:a("Total Users"),iconClass:"bx bx-badge"},{value:h.activeUsers,title:a("Active Users"),iconClass:"bx bx-badge-check"},{value:h.inactiveUsers,title:a("Inactive Users"),iconClass:"bx bx-x-circle"}]),n=B({user_id:null,name:"",email:"",plan_id:"",will_expire:"",assign_plan:!0}),M=i=>{n.reset(),n.user_id=i.id,n.name=i.name,n.email=i.email,n.plan_id=i.plan_id??"",n.will_expire=i.will_expire??"",v.of("#editUserDrawer").show()},N=()=>{n.put(route("admin.users.assign.plan",n.user_id),{onSuccess:()=>{n.reset(),v.of("#editUserDrawer").hide()}})},E=[{label:"Name",value:"name"},{label:"Email",value:"email"},{label:"Status",value:"status",options:[{label:"Active",value:1},{label:"Inactive",value:0}]}];return(i,d)=>{const p=x("Icon"),f=x("Link"),I=T("lazy");return r(),c(u,null,[t("main",X,[o(R,{title:"Users"}),t("div",Z,[o(G,{items:S.value,grid:"3"},null,8,["items"]),o(Q,{options:E}),t("div",tt,[t("table",et,[t("thead",null,[t("tr",null,[t("th",null,l(e(a)("User")),1),t("th",null,l(e(a)("Assigned To")),1),t("th",null,l(e(a)("Cardholder ID")),1),t("th",null,l(e(a)("Plan")),1),t("th",null,l(e(a)("Expire At")),1),t("th",null,l(e(a)("Status")),1),t("th",null,l(e(a)("Created At")),1),t("th",null,[t("div",st,l(e(a)("Action")),1)])])]),m.users.total?(r(),c("tbody",lt,[(r(!0),c(u,null,k(m.users.data,s=>{var w,g;return r(),c("tr",{key:s.id},[t("td",at,[t("div",nt,[_(t("img",ot,null,512),[[I,e(D)(s.name,s.avatar)]]),t("a",{href:i.route("admin.users.show",s.id)},[t("p",dt,l(s.name),1),t("p",null,l(s.email),1)],8,it)])]),t("td",null,l(((w=s.assignedemails)==null?void 0:w.email)||e(a)("N/A")),1),t("td",null,l(((g=s.cardholder)==null?void 0:g.cardholder)||e(a)("N/A")),1),t("td",null,[s.plan?(r(),c("span",rt,l(s.plan.title),1)):(r(),c(u,{key:1},[Y(" N/A ")],64))]),t("td",null,l(s.will_expire?e(U)(s.will_expire).format("D-MMM-Y"):e(a)("N/A")),1),t("td",ct,[t("span",{class:j(["badge",s.status==1?"badge-success":"badge-danger"])},l(s.status==1?e(a)("Active"):e(a)("Inactive")),3)]),t("td",null,l(e(U)(s.created_at).format("D-MMM-Y")),1),t("td",mt,[t("div",pt,[t("div",_t,[o(p,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),t("div",ut,[t("ul",ht,[t("li",bt,[o(f,{href:i.route("admin.users.show",s),class:"dropdown-link"},{default:y(()=>[o(p,{icon:"bx:show"}),t("span",null,l(e(a)("View")),1)]),_:2},1032,["href"])]),t("li",vt,[t("button",{onClick:P=>M(s),class:"dropdown-link"},[o(p,{icon:"bx:user-pin"}),t("span",null,l(e(a)("Assign Plan")),1)],8,ft)]),t("li",wt,[o(f,{href:i.route("admin.users.edit",s),class:"dropdown-link"},{default:y(()=>[o(p,{icon:"bx:edit"}),t("span",null,l(e(a)("Edit")),1)]),_:2},1032,["href"])]),t("li",gt,[t("button",{as:"button",class:"dropdown-link",onClick:P=>e(C)(i.route("admin.users.destroy",s.id))},[o(p,{class:"h-6",icon:"bx:trash"}),t("span",null,l(e(a)("Delete")),1)],8,xt)])])])])])])}),128))])):(r(),z(K,{key:1,"for-table":"true"}))]),o(W,{links:m.users.links},null,8,["links"])])])]),t("div",kt,[t("form",{onSubmit:d[4]||(d[4]=F(s=>N(),["prevent"]))},[t("div",yt,[t("h5",null,l(e(a)("Edit User Information")),1),Ut]),t("div",Ct,[t("div",At,[t("label",null,l(e(a)("Name")),1),_(t("input",{type:"text",class:"input",disabled:"","onUpdate:modelValue":d[0]||(d[0]=s=>e(n).name=s)},null,512),[[b,e(n).name]])]),t("div",Dt,[t("label",null,l(e(a)("Email")),1),_(t("input",{type:"email",class:"input",disabled:"","onUpdate:modelValue":d[1]||(d[1]=s=>e(n).email=s)},null,512),[[b,e(n).email]])]),t("div",St,[t("label",Mt,l(e(a)("Plan")),1),_(t("select",{"onUpdate:modelValue":d[2]||(d[2]=s=>e(n).plan_id=s),class:"select"},[t("option",Nt,l(e(a)("Select Plan")),1),(r(!0),c(u,null,k(m.plans,s=>(r(),c("option",{value:s.id,key:s.id},l(s.title)+" "+l(e(A)(s.price)),9,Et))),128))],512),[[L,e(n).plan_id]])]),t("div",It,[t("label",null,l(e(a)("Will Expire")),1),_(t("input",{type:"date",class:"input","onUpdate:modelValue":d[3]||(d[3]=s=>e(n).will_expire=s)},null,512),[[b,e(n).will_expire]])])]),t("div",Pt,[t("div",Vt,[t("button",$t,[t("span",null,l(e(a)("Close")),1)]),o(J,{classes:"btn btn-primary w-full",processing:e(n).processing,"btn-text":e(a)("Save Changes")},null,8,["processing","btn-text"])])])],32)])],64)}}});export{Zt as default};
