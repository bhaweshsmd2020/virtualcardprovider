import{i as k,g as s,T as C,k as U,o as l,c,b as t,a as r,t as o,u as e,F as b,r as D,d as v,w as S,l as u,v as m,f as T,p as V,h as q,q as M,n as B}from"./app-8b08b02b.js";import{_ as R}from"./AdminLayout-2a0b7492.js";import{P as $}from"./PageHeader-f9559e85.js";import{s as j}from"./sharedComposable-7773727f.js";import{P as E}from"./Paginate-50e2af07.js";import{h as P}from"./moment-a9aaa855.js";import{_ as Y}from"./OverviewGrid-f71a88c2.js";import{S as A}from"./SpinnerBtn-92ab3ac7.js";import{d as w}from"./drawer-fe4c5e1a.js";import{t as I}from"./toastComposable-d43a11ef.js";import{_ as O}from"./NoDataFound-f8b61a7b.js";import{_ as F}from"./FilterDropdown-576dea2b.js";import"./dropdown-dfddaeee.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";const L={class:"container flex-grow p-4 sm:p-6"},z={class:"space-y-6"},H={class:"table-responsive whitespace-nowrap rounded-primary"},G={class:"table"},J={class:"w-[5%] uppercase"},K={class:"w-[15%] uppercase"},Q={class:"w-[10%] uppercase"},W={class:"w-[10%] uppercase"},X={class:"w-[10%] uppercase"},Z={class:"w-[5%] !text-right uppercase"},tt={key:0},et={class:"text-left"},st={key:1},ot={class:"text-center"},at={class:"flex justify-end"},it={class:"dropdown","data-placement":"bottom-start"},nt={class:"dropdown-toggle"},lt={class:"dropdown-content w-40"},rt={class:"dropdown-list"},dt={class:"dropdown-list-item"},ct=["onClick"],ut={id:"addNewNotificationDrawer",class:"drawer drawer-right"},mt={class:"drawer-header"},pt=t("button",{type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},[t("i",{"data-feather":"x",width:"1.5rem",height:"1.5rem"})],-1),_t={class:"drawer-body"},ft={class:"form-group"},ht={class:"form-group"},bt={class:"form-group"},vt={class:"form-group"},wt={class:"drawer-footer"},gt={class:"flex justify-between gap-2"},xt={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},yt=T({layout:R}),At=Object.assign(yt,{__name:"Index",props:["segments","buttons","request","notifications","totalNotifications","readNotifications","unreadNotifications","type"],setup(d){const{textExcerpt:p,deleteRow:g}=j();k(()=>{w.init()});const _=d,x=[{value:_.totalNotifications,title:s("Total Notifications"),iconClass:"bx bx-user-voice"},{value:_.readNotifications,title:s("Read Notifications"),iconClass:"bx bx-envelope-open"},{value:_.unreadNotifications,title:s("Unread Notifications"),iconClass:"bx bx-envelope"}],y=[{label:"Title",value:"title"},{label:"Comment",value:"comment"},{label:"User Email",value:"user_email"},{label:"Status",value:"seen",options:[{label:"Read",value:1},{label:"Unread",value:0}]}],i=C({email:"",title:"",description:"",url:""}),N=()=>{i.post(route("admin.notification.store"),{onSuccess:()=>{i.reset(),I.success(s("Notification created successfully")),w.of("#addNewNotificationDrawer").hide()}})};return(f,n)=>{const h=U("Icon");return l(),c(b,null,[t("main",L,[r($,{title:"Notifications",buttons:d.buttons},null,8,["buttons"]),t("div",z,[r(Y,{items:x,grid:"3"}),r(F,{options:y}),t("div",H,[t("table",G,[t("thead",null,[t("tr",null,[t("th",J,o(e(s)("Title")),1),t("th",K,o(e(s)("Comment")),1),t("th",Q,o(e(s)("User")),1),t("th",W,o(e(s)("Seen")),1),t("th",X,o(e(s)("Created At")),1),t("th",Z,o(e(s)("Actions")),1)])]),d.notifications.total?(l(),c("tbody",tt,[(l(!0),c(b,null,D(d.notifications.data,a=>(l(),c("tr",{key:a.id},[t("td",et,o(e(p)(a.title,80)),1),t("td",null,o(e(p)(a.comment,50)),1),t("td",null,[a.user_id?(l(),v(e(M),{key:0,class:"text-dark",href:f.route("admin.users.show",a.user_id)},{default:V(()=>[q(o(e(p)(a.user.name,15)),1)]),_:2},1032,["href"])):(l(),c("span",st,o(e(s)("None")),1))]),t("td",null,[t("span",{class:B(["badge",a.seen==1?"badge-success":"badge-danger"])},o(a.seen==1?"Read":"Unread"),3)]),t("td",ot,o(e(P)(a.created_at).format("DD-MMM-YYYY")),1),t("td",null,[t("div",at,[t("div",it,[t("div",nt,[r(h,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),t("div",lt,[t("ul",rt,[t("li",dt,[t("a",{class:"dropdown-link delete-confirm",href:"javascript:void(0)",onClick:Nt=>e(g)(f.route("admin.notification.destroy",a.id))},[r(h,{class:"w-30 text-lg",icon:"bx:trash"}),t("span",null,o(e(s)("Delete")),1)],8,ct)])])])])])])]))),128))])):(l(),v(O,{key:1,"for-table":"true"}))])]),r(E,{links:d.notifications.links},null,8,["links"])])]),t("div",ut,[t("form",{onSubmit:S(N,["prevent"])},[t("div",mt,[t("h5",null,o(e(s)("Send Notification")),1),pt]),t("div",_t,[t("div",ft,[t("label",null,o(e(s)("Receive Email")),1),u(t("input",{"onUpdate:modelValue":n[0]||(n[0]=a=>e(i).email=a),type:"email",name:"email",class:"input",required:""},null,512),[[m,e(i).email]])]),t("div",ht,[t("label",null,o(e(s)("Title")),1),u(t("input",{"onUpdate:modelValue":n[1]||(n[1]=a=>e(i).title=a),type:"text",name:"title",class:"input",required:"",maxlength:"100"},null,512),[[m,e(i).title]])]),t("div",bt,[t("label",null,o(e(s)("Description")),1),u(t("textarea",{"onUpdate:modelValue":n[2]||(n[2]=a=>e(i).description=a),class:"textarea",required:"",name:"description",maxlength:"200"},null,512),[[m,e(i).description]])]),t("div",vt,[t("label",null,o(e(s)("Action Link")),1),u(t("input",{"onUpdate:modelValue":n[3]||(n[3]=a=>e(i).url=a),type:"url",name:"url",class:"input",required:"",maxlength:"100"},null,512),[[m,e(i).url]])])]),t("div",wt,[t("div",gt,[t("button",xt,[t("span",null,o(e(s)("Close")),1)]),r(A,{classes:"btn btn-primary w-full",processing:e(i).processing,"btn-text":e(s)("Create Notification")},null,8,["processing","btn-text"])])])],32)])],64)}}});export{At as default};
