import{_ as A}from"./UserLayout-90970d6e.js";import{P as L}from"./PageHeader-f9559e85.js";import{i as v,g as s,k as g,o as c,c as d,a as i,u as a,b as t,t as o,F as P,r as M,d as B,f as S,p as k,h as O,n as $}from"./app-8b08b02b.js";import{_ as j}from"./OverviewGrid-f71a88c2.js";import{P as R}from"./Paginate-50e2af07.js";import{d as x}from"./drawer-fe4c5e1a.js";import{_ as z}from"./NoDataFound-f8b61a7b.js";import{_ as D}from"./FilterDropdown-576dea2b.js";import{s as F}from"./sharedComposable-7773727f.js";import{h as I}from"./moment-a9aaa855.js";import{S as f}from"./sweetalert2.esm.all-df3a4912.js";import"./dropdown-dfddaeee.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";import"./toastComposable-d43a11ef.js";import"./SpinnerBtn-92ab3ac7.js";const V={class:"container flex-grow p-4 sm:p-6"},Y={class:"space-y-4"},E={class:"table-responsive whitespace-nowrap rounded-primary"},H={class:"table"},N={class:"!text-right"},q={key:0},U={key:0},W={key:1},G={class:"flex justify-end"},J={class:"dropdown","data-placement":"bottom-start"},K={class:"dropdown-toggle"},Q={class:"dropdown-content w-40"},X={class:"dropdown-list"},Z={class:"dropdown-list-item"},tt=S({layout:A}),vt=Object.assign(tt,{__name:"Index",props:["segments","topUps","request","totalTopUps","totalAmount","totalApprovedTopUps","totalRejectedTopUps","type"],setup(m){v(()=>{x.init();const r=new URLSearchParams(window.location.search),w=r.get("success"),h=r.get("buttonmes"),_=r.get("redirect")||"/user/account";if(w){f.fire({icon:"success",title:`<h2 style='font-size: 20px;'>${w}</h2>`,confirmButtonText:`${h}`,allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:u=>{const l=document.createElement("button");l.innerHTML="&times;",l.classList.add("swal-close-btn"),l.onclick=()=>f.close(),u.appendChild(l)}}).then(u=>{u.isConfirmed&&(window.location.href=_)});const n=new URL(window.location.href);n.searchParams.delete("success"),n.searchParams.delete("redirect"),window.history.replaceState({},document.title,n)}const e=r.get("error");if(e){f.fire({icon:"error",title:`<h2 style='font-size: 20px;'>${e}</h2>`,confirmButtonText:"Okay",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:u=>{const l=document.createElement("button");l.innerHTML="&times;",l.classList.add("swal-close-btn"),l.onclick=()=>f.close(),u.appendChild(l)}});const n=new URL(window.location.href);n.searchParams.delete("error"),window.history.replaceState({},document.title,n)}}),v(()=>{x.init()});const{formatCurrency:b,trim:et,badgeClass:y}=F(),p=m,C=[{value:p.totalTopUps,title:s("Total"),iconClass:"bx bx-badge-check"},{value:b(p.totalAmount||0),title:s("Total Amount"),iconClass:"bx bx-dollar-circle"},{value:p.totalApprovedTopUps,title:s("Completed Topup"),iconClass:"bx bx-check"},{value:p.totalRejectedTopUps,title:s("Declined Topup"),iconClass:"bx bx-x-circle"}],T=[{value:"invoice_no",label:"invoice"},{value:"amount",label:"Amount"},{label:"Status",value:"status",options:[{label:"Pending",value:"pending"},{label:"Approved",value:"approved"},{label:"Rejected",value:"rejected"}]}];return(r,w)=>{const h=g("Link"),_=g("Icon");return c(),d("main",V,[i(L,{title:a(s)("Topup Lists"),buttons:r.buttons},null,8,["title","buttons"]),t("div",Y,[i(j,{items:C}),i(D,{options:T}),t("div",E,[t("table",H,[t("thead",null,[t("tr",null,[t("th",null,o(a(s)("Invoice")),1),t("th",null,o(a(s)("Payment Method")),1),t("th",null,o(a(s)("For")),1),t("th",null,o(a(s)("Amount")),1),t("th",null,o(a(s)("Status")),1),t("th",null,o(a(s)("Created At")),1),t("th",N,o(a(s)("Action")),1)])]),m.topUps.total?(c(),d("tbody",q,[(c(!0),d(P,null,M(m.topUps.data,e=>{var n;return c(),d("tr",{key:e.id},[t("td",null,[i(h,{href:"/user/top-up/"+e.id,class:"text-sm font-medium text-primary-500 transition duration-150 ease-in-out hover:underline"},{default:k(()=>[O(o(e.invoice_no),1)]),_:2},1032,["href"])]),t("td",null,o(((n=e==null?void 0:e.gateway)==null?void 0:n.name)||"balance"),1),t("td",null,[e.type==="balance"?(c(),d("span",U,"Account")):(c(),d("span",W,"Wallet"))]),t("td",null,o(a(b)(e.amount)),1),t("td",null,[t("div",{class:$(["capitalize",a(y)(e.status)])},o(e.status),3)]),t("td",null,o(a(I)(e.created_at).format("DD MMM, YYYY")),1),t("td",null,[t("div",G,[t("div",J,[t("div",K,[i(_,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),t("div",Q,[t("ul",X,[t("li",Z,[i(h,{href:"/user/top-up/"+e.id,class:"dropdown-link"},{default:k(()=>[i(_,{class:"h-6",icon:"fe:eye"}),t("span",null,o(a(s)("View")),1)]),_:2},1032,["href"])])])])])])])])}),128))])):(c(),B(z,{key:1,"for-table":"true"}))])]),i(R,{links:m.topUps.links},null,8,["links"])])])}}});export{vt as default};
