import{i as y,T as k,j as C,k as x,o as d,c as i,b as t,a as n,t as e,u as s,F as m,r as S,w as j,l as E,m as D,f as P,g as a,p as h,h as b,q as f,e as M,O as A}from"./app-55c25e51.js";import{_ as L}from"./AdminLayout-d7dc3a0b.js";import{P as R}from"./PageHeader-8abf30c3.js";import{P as V}from"./Paginate-d3bcd4a4.js";import{h as q}from"./moment-a9aaa855.js";import{s as B}from"./sharedComposable-713147fd.js";import{S as N}from"./SpinnerBtn-5f5f7277.js";import{d as u}from"./drawer-fe4c5e1a.js";import"./toastComposable-bc1f97e9.js";import{_ as O}from"./FilterDropdown-df98b38e.js";import"./dropdown-8ee40221.js";import"./Modal-522ea419.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-869d906f.js";const $={class:"container p-4 sm:p-6"},F={class:"space-y-6"},I={class:"table-responsive whitespace-nowrap rounded-primary"},T={class:"table"},U={class:"flex justify-end"},H={key:0,class:"badge badge-primary"},Y={key:1,class:"badge badge-success"},z={key:2,class:"badge badge-danger"},G={class:"flex justify-end"},J={class:"dropdown","data-placement":"bottom-start"},K={class:"dropdown-toggle"},Q={class:"dropdown-content w-40"},W={class:"dropdown-list"},X={class:"dropdown-list-item"},Z=["onClick"],tt={id:"editEmailDrawer",class:"drawer drawer-right"},et={class:"drawer-header"},st=t("button",{type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},[t("i",{"data-feather":"x",width:"1.5rem",height:"1.5rem"})],-1),at={class:"drawer-body"},ot={class:"mb-2"},nt={value:"0"},lt={value:"1"},dt={value:"2"},it={class:"drawer-footer"},rt={class:"flex justify-between gap-2"},ct={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},ut=P({layout:L}),Et=Object.assign(ut,{__name:"Index",props:["limits"],setup(p){B(),y(()=>{u.init()}),k({status:1});const l=C({}),v=r=>{l.value={...r},u.of("#editEmailDrawer").show()},w=()=>{A.post(route("admin.card.limit-requests.update",l.value.id),l.value,{onSuccess:()=>{l.value={},u.of("#editEmailDrawer").hide()}})},g=[{label:"Status",value:"status",options:[{label:"Pending",value:"0"},{label:"Approved",value:"1"},{label:"Rejected",value:"2"}]}];return(r,c)=>{const _=x("Icon");return d(),i(m,null,[t("main",$,[n(R,{title:"Card Limit Requests",buttons:r.buttons},null,8,["buttons"]),t("div",F,[n(O,{options:g}),t("div",I,[t("table",T,[t("thead",null,[t("tr",null,[t("th",null,e(s(a)("User")),1),t("th",null,e(s(a)("Card")),1),t("th",null,e(s(a)("Limit")),1),t("th",null,e(s(a)("Status")),1),t("th",null,e(s(a)("Created At")),1),t("th",U,e(s(a)("Action")),1)])]),t("tbody",null,[(d(!0),i(m,null,S(p.limits.data,o=>(d(),i("tr",{key:o.id},[t("td",null,[n(s(f),{class:"underline",href:r.route("admin.users.show",o.user.id)},{default:h(()=>[b(e(o.user.name),1)]),_:2},1032,["href"])]),t("td",null,[n(s(f),{class:"underline",href:"/admin/credit-cards/"+o.credit_card.id},{default:h(()=>[b(e(o.credit_card.last4),1)]),_:2},1032,["href"])]),t("td",null,e(o.subtotal),1),t("td",null,[o.status=="0"?(d(),i("span",H,e(s(a)("Pending")),1)):o.status=="1"?(d(),i("span",Y,e(s(a)("Approved")),1)):o.status=="2"?(d(),i("span",z,e(s(a)("Rejected")),1)):M("",!0)]),t("td",null,e(s(q)(o.created_at).format("D-MMM-Y")),1),t("td",null,[t("div",G,[t("div",J,[t("div",K,[n(_,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),t("div",Q,[t("ul",W,[t("li",X,[t("button",{onClick:pt=>v(o),class:"dropdown-link"},[n(_,{class:"h-6 text-slate-400",icon:"material-symbols:edit-outline"}),t("span",null,e(s(a)("Edit")),1)],8,Z)])])])])])])]))),128))])])]),n(V,{links:p.limits.links},null,8,["links"])])]),t("div",tt,[t("form",{onSubmit:c[1]||(c[1]=j(o=>w(),["prevent"]))},[t("div",et,[t("h5",null,e(s(a)("Edit Card Limit Requests")),1),st]),t("div",at,[t("div",ot,[t("label",null,e(s(a)("Status")),1),E(t("select",{"onUpdate:modelValue":c[0]||(c[0]=o=>l.value.status=o),class:"select",name:"status"},[t("option",nt,e(s(a)("Pending")),1),t("option",lt,e(s(a)("Approve")),1),t("option",dt,e(s(a)("Reject")),1)],512),[[D,l.value.status]])])]),t("div",it,[t("div",rt,[t("button",ct,[t("span",null,e(s(a)("Close")),1)]),n(N,{classes:"btn btn-primary w-full",processing:l.value.processing,"btn-text":s(a)("Save Changes")},null,8,["processing","btn-text"])])])],32)])],64)}}});export{Et as default};
