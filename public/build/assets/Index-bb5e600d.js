import{s as E}from"./sharedComposable-713147fd.js";import{h as p}from"./moment-a9aaa855.js";import{_ as L}from"./UserLayout-5a6919f2.js";import{P as B}from"./PageHeader-8abf30c3.js";import{_ as k}from"./NoDataFound-c4885428.js";import{P as z}from"./Paginate-d3bcd4a4.js";import{S as b}from"./sweetalert2.esm.all-df3a4912.js";import{z as v,j as T,i as j,Y as N,o as a,c as r,a as Y,b as e,n as f,t,e as y,u as d,h as $,F as x,r as w,d as C,f as O}from"./app-55c25e51.js";import"./toastComposable-bc1f97e9.js";import"./dropdown-8ee40221.js";import"./Modal-522ea419.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-869d906f.js";const H={class:"container flex-grow p-4 sm:p-6"},V={class:"flex items-center justify-between"},W={class:"mb-4 flex items-center justify-between"},A={class:"card max-w-max p-1"},U={key:0,class:"alert alert-danger text-base"},F={key:1,class:"alert alert-danger text-base"},I={key:2,class:"alert alert-warning text-base"},R={key:3,class:"mt-3 grid grid-cols-1 rounded-xl border border-primary-400 lg:grid-cols-12"},q={class:"col-span-1 flex flex-col justify-center gap-2 p-4 lg:col-span-7 lg:p-8"},G={class:"text-gray-400"},J={class:"col-span-1 flex gap-3 border-l border-primary-400 p-4 lg:col-span-5 lg:p-8"},K={class:"mt-3 whitespace-nowrap text-3xl text-primary-500 lg:text-5xl"},Q={class:"px-2"},X={class:"text-primary-500"},Z={class:"my-8 grid grid-cols-1 gap-14 lg:grid-cols-3"},ee={key:0,class:"absolute -left-1 top-9 max-w-max rounded-r-xl bg-primary-600 px-4 capitalize text-primary-50"},te={class:"text-center text-2xl text-gray-400"},se={class:"my-8 flex justify-center gap-2"},le={class:"text-3xl"},ae={class:"text-4xl"},ne={class:"flex flex-col gap-2"},re={class:"ml-2 text-sm"},ie={class:"ml-2 text-sm"},oe=["href"],ue={class:"mb-2"},ce={key:5,class:"table-responsive whitespace-nowrap rounded-primary"},de={class:"ert-table table"},pe={class:"text-center"},me={class:"border-0"},fe={class:"text-center"},ye=O({layout:L}),Se=Object.assign(ye,{__name:"Index",props:["user","plans","orders","segments"],setup(i){const o=i,{formatCurrency:h,badgeClass:M}=E(),D=v(()=>o.user.will_expire?p(o.user.will_expire).diff(p(),"days")<7:!1),P=v(()=>o.user.will_expire?p(o.user.will_expire).isBefore(p()):!1),u=T("monthly"),_=v(()=>u.value==="monthly"?o.plans.filter(s=>s.days===30):u.value==="yearly"?o.plans.filter(s=>s.days===365):u.value==="lifetime"?o.plans.filter(s=>s.days>365):[]),g=()=>{o.user.plan_data||b.fire({icon:"warning",title:"<h2 style='font-size: 20px;'>You haven't purchased any subscription plans yet.</h2>",confirmButtonText:"Subscribe Now",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:s=>{const n=document.createElement("button");n.innerHTML="&times;",n.classList.add("swal-close-btn"),n.onclick=()=>b.close(),s.appendChild(n)}})},S=()=>{const s=new URLSearchParams(window.location.search).get("success");if(s){b.fire({icon:"success",title:`<h2 style='font-size: 20px;'>${s}</h2>`,html:"<p style='font-size: 16px;'>To apply for a prepaid card, top up your account now.</p>",confirmButtonText:"Continue",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:m=>{const l=document.createElement("button");l.innerHTML="&times;",l.classList.add("swal-close-btn"),l.onclick=()=>b.close(),m.appendChild(l)}}).then(m=>{m.isConfirmed&&(window.location.href=route("user.account"))});const n=new URL(window.location.href);n.searchParams.delete("success"),window.history.replaceState({},document.title,n)}};return j(()=>{g(),S()}),N(()=>o.user.plan_data,s=>{s||g()}),(s,n)=>{var m;return a(),r("main",H,[Y(B,{title:"Subscription",buttons:[]}),e("div",V,[e("div",W,[e("div",A,[e("button",{class:f(["btn w-full px-14 py-2 md:w-auto",{"btn-primary":u.value==="monthly"}]),onClick:n[0]||(n[0]=l=>u.value="monthly")},[e("span",null,t(s.trans("Monthly")),1)],2),e("button",{class:f(["btn w-full px-14 py-2 md:w-auto",{"btn-primary":u.value==="yearly"}]),onClick:n[1]||(n[1]=l=>u.value="yearly")},[e("span",null,t(s.trans("Yearly")),1)],2),e("button",{class:f(["btn w-full px-14 py-2 md:w-auto",{"btn-primary":u.value==="lifetime"}]),onClick:n[2]||(n[2]=l=>u.value="lifetime")},[e("span",null,t(s.trans("Lifetime")),1)],2)])])]),!i.user.will_expire||!i.user.plan||!i.user.plan_id?(a(),r("div",U,[e("p",null,t(s.trans("You haven't purchased any subscription plans yet.")),1)])):y("",!0),P.value?(a(),r("div",F,[e("p",null,t(s.trans("Your subscription has already expired")),1)])):D.value?(a(),r("div",I,[e("p",null,t(s.trans("Your current subscription plan is about to expire in less than 7 days")),1)])):y("",!0),i.user.will_expire!=null?(a(),r("div",R,[e("div",q,[e("h4",null,t(s.trans("Current Plan"))+" ("+t(i.user.plan.title)+")",1),e("p",G,t(s.trans(`Unlimited access to our legal document library and online rental application tool,
          billed monthly.`)),1)]),e("div",J,[e("p",K,t(d(h)(i.user.plan.price)),1),e("div",Q,[e("p",X,t(i.user.plan.days===30?"Monthly":i.user.plan.days===365?"Yearly":"Lifetime")+" "+t(s.trans("Plan")),1),e("span",null,[$(t(s.trans("Your subscription will expire"))+" ",1),e("span",null,t(d(p)(i.user.will_expire).format("MMM DD, YYYY")),1)])])])])):y("",!0),e("div",Z,[(a(!0),r(x,null,w(_.value,l=>(a(),r("div",{key:l.id,class:f(["flex flex-col justify-between overflow-hidden rounded-xl px-12 py-8 shadow-md",{"card relative border-2 border-primary-500 ":l.is_recommended,"border border-gray-200 dark:border-gray-700":l.is_recommended===0}])},[l.is_recommended?(a(),r("div",ee,t(s.trans("popular")),1)):y("",!0),e("div",te,t(l.title),1),e("div",se,[e("span",le,t(d(h)(l.price)[0]),1),e("span",ae,t(l.price),1),e("span",null,t(l.days===30?"Monthly":l.days===365?"Yearly":"Lifetime"),1)]),e("ul",ne,[(a(!0),r(x,null,w(l.data,c=>(a(),r("li",{key:c.value,class:"text-capitalize flex items-center"},[e("span",re,t(c.overview),1)]))),128)),(a(!0),r(x,null,w(l.extra_data,c=>(a(),r("li",{key:c.value,class:"text-capitalize flex items-center"},[e("span",ie,t(c.value),1)]))),128))]),e("a",{href:s.route("user.subscription.payment",l.id),class:"btn btn-soft-primary mt-6 w-full"},t(s.trans("Choose Plan")),9,oe)],2))),128))]),((m=_.value)==null?void 0:m.length)<1?(a(),C(k,{key:4})):y("",!0),e("h5",ue,t(s.trans("Subscription History")),1),i.orders.total?(a(),r("div",ce,[e("table",de,[e("thead",null,[e("tr",null,[e("th",null,t(s.trans("Invoice No")),1),e("th",null,t(s.trans("Plan")),1),e("th",null,t(s.trans("Amount")),1),e("th",null,t(s.trans("Tax")),1),e("th",null,t(s.trans("Status")),1),e("th",null,t(s.trans("Expire Date")),1),e("th",pe,t(s.trans("Created Date")),1)])]),e("tbody",me,[(a(!0),r(x,null,w(i.orders.data,l=>{var c;return a(),r("tr",{key:l.id},[e("td",null,t(l.invoice_no),1),e("td",null,t((c=l.plan)==null?void 0:c.title),1),e("td",null,t(d(h)(l.amount)),1),e("td",null,t(d(h)(l.tax)),1),e("td",null,[e("span",{class:f(d(M)(l.status))},t(l.status),3)]),e("td",null,t(d(p)(l.will_expire).format("DD MMM, YYYY")),1),e("td",fe,t(d(p)(l.created_at).format("DD MMM, YYYY")),1)])}),128))])])])):(a(),C(k,{key:6})),Y(z,{links:i.orders.links},null,8,["links"])])}}});export{Se as default};
