import{i as N,T as M,j,k as V,o as r,c,b as s,a as n,t as a,u as t,F as b,r as $,w as f,l as h,v,m as B,f as F,g as e,p as w,h as O,q as g,n as P,O as T}from"./app-8b08b02b.js";import{_ as q}from"./AdminLayout-2a0b7492.js";import{P as I}from"./PageHeader-f9559e85.js";import{P as U}from"./Paginate-50e2af07.js";import{h as z}from"./moment-a9aaa855.js";import{s as H}from"./sharedComposable-7773727f.js";import{S as y}from"./SpinnerBtn-92ab3ac7.js";import{d as u}from"./drawer-fe4c5e1a.js";import{t as k}from"./toastComposable-d43a11ef.js";import{_ as L}from"./FilterDropdown-576dea2b.js";import"./dropdown-dfddaeee.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./ToastrContainer-e495c250.js";const R={class:"container p-4 sm:p-6"},Y={class:"space-y-6"},G={class:"table-responsive whitespace-nowrap rounded-primary"},J={class:"table"},K={class:"flex justify-end"},Q={key:0},W={key:1},X={class:"flex justify-end"},Z={class:"dropdown","data-placement":"bottom-start"},ss={class:"dropdown-toggle"},ts={class:"dropdown-content w-40"},es={class:"dropdown-list"},as={class:"dropdown-list-item"},os=["onClick"],ls={class:"dropdown-list-item"},ns={id:"addNewEmailDrawer",class:"drawer drawer-right"},is={class:"drawer-header"},ds=s("button",{type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},[s("i",{"data-feather":"x",width:"1.5rem",height:"1.5rem"})],-1),rs={class:"drawer-body"},cs={class:"mb-2"},us={class:"drawer-footer"},ms={class:"flex justify-between gap-2"},ps={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},_s={id:"editEmailDrawer",class:"drawer drawer-right"},hs={class:"drawer-header"},bs=s("button",{type:"button",class:"btn btn-plain-secondary dark:text-slate-300 dark:hover:bg-slate-700 dark:focus:bg-slate-700","data-dismiss":"drawer"},[s("i",{"data-feather":"x",width:"1.5rem",height:"1.5rem"})],-1),fs={class:"drawer-body"},vs={class:"mb-2"},ws={class:"mb-2"},gs={value:"1"},ys={value:"0"},ks={class:"drawer-footer"},xs={class:"flex justify-between gap-2"},Es={type:"button",class:"btn btn-secondary w-full","data-dismiss":"drawer"},Cs=F({layout:q}),Is=Object.assign(Cs,{__name:"Index",props:["emails","buttons"],setup(m){const{deleteRow:x}=H();N(()=>{u.init()});const d=M({email:"",status:1}),i=j({}),E=()=>{d.post(route("admin.card.emails.store"),{onSuccess:()=>{d.reset(),k.success(e("Email has been added successfully")),u.of("#addNewEmailDrawer").hide()}})},C=p=>{i.value={...p},u.of("#editEmailDrawer").show()},S=()=>{T.post(route("admin.card.emails.update",i.value.id),i.value,{onSuccess:()=>{i.value={},k.success(e("Email has been updated successfully")),u.of("#editEmailDrawer").hide()}})},A=[{label:"Email",value:"email"},{label:"Status",value:"status",options:[{label:"Assigned",value:"1"},{label:"Not Assigned",value:"0"}]}];return(p,l)=>{const _=V("Icon");return r(),c(b,null,[s("main",R,[n(I,{title:"Card Emails",buttons:m.buttons},null,8,["buttons"]),s("div",Y,[n(L,{options:A}),s("div",G,[s("table",J,[s("thead",null,[s("tr",null,[s("th",null,a(t(e)("Email")),1),s("th",null,a(t(e)("Assigned To")),1),s("th",null,a(t(e)("Status")),1),s("th",null,a(t(e)("Created At")),1),s("th",K,a(t(e)("Action")),1)])]),s("tbody",null,[(r(!0),c(b,null,$(m.emails.data,o=>(r(),c("tr",{key:o.id},[s("td",null,a(o.email),1),s("td",null,[o.user_id==null?(r(),c("span",Q," Not Assigned ")):(r(),c("span",W,[n(t(g),{class:"underline",href:p.route("admin.users.show",o.user.id)},{default:w(()=>[O(a(o.user.email),1)]),_:2},1032,["href"])]))]),s("td",null,[s("span",{class:P(["badge",o.status=="0"?"badge-success":"badge-danger"])},a(o.status=="0"?t(e)("Not Assigned"):t(e)("Assigned")),3)]),s("td",null,a(t(z)(o.created_at).format("D-MMM-Y")),1),s("td",null,[s("div",X,[s("div",Z,[s("div",ss,[n(_,{class:"w-30 text-lg",icon:"bi:three-dots-vertical"})]),s("div",ts,[s("ul",es,[s("li",as,[s("button",{onClick:D=>C(o),class:"dropdown-link"},[n(_,{class:"h-6 text-slate-400",icon:"material-symbols:edit-outline"}),s("span",null,a(t(e)("Edit")),1)],8,os)]),s("li",ls,[n(t(g),{as:"button",class:"dropdown-link",onClick:D=>t(x)("/admin/card-emails/delete/"+o.id)},{default:w(()=>[n(_,{class:"h-6",icon:"material-symbols:delete-outline"}),s("span",null,a(t(e)("Delete")),1)]),_:2},1032,["onClick"])])])])])])])]))),128))])])]),n(U,{links:m.emails.links},null,8,["links"])])]),s("div",ns,[s("form",{onSubmit:l[1]||(l[1]=f(o=>E(),["prevent"]))},[s("div",is,[s("h5",null,a(t(e)("Add New Email")),1),ds]),s("div",rs,[s("div",cs,[s("label",null,a(t(e)("Email")),1),h(s("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>t(d).email=o),type:"text",name:"email",class:"input",required:""},null,512),[[v,t(d).email]])])]),s("div",us,[s("div",ms,[s("button",ps,[s("span",null,a(t(e)("Close")),1)]),n(y,{classes:"btn btn-primary w-full",processing:t(d).processing,"btn-text":t(e)("Save Changes")},null,8,["processing","btn-text"])])])],32)]),s("div",_s,[s("form",{onSubmit:l[4]||(l[4]=f(o=>S(),["prevent"]))},[s("div",hs,[s("h5",null,a(t(e)("Edit Email")),1),bs]),s("div",fs,[s("div",vs,[s("label",null,a(t(e)("Email")),1),h(s("input",{"onUpdate:modelValue":l[2]||(l[2]=o=>i.value.email=o),type:"text",name:"email",class:"input",required:""},null,512),[[v,i.value.email]])]),s("div",ws,[s("label",null,a(t(e)("Status")),1),h(s("select",{"onUpdate:modelValue":l[3]||(l[3]=o=>i.value.status=o),class:"select",name:"status"},[s("option",gs,a(t(e)("Assigned")),1),s("option",ys,a(t(e)("Not Assigned")),1)],512),[[B,i.value.status]])])]),s("div",ks,[s("div",xs,[s("button",Es,[s("span",null,a(t(e)("Close")),1)]),n(y,{classes:"btn btn-primary w-full",processing:i.value.processing,"btn-text":t(e)("Save Changes")},null,8,["processing","btn-text"])])])],32)])],64)}}});export{Is as default};
