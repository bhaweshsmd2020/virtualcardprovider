import{T as C,j as y,z as P,o as c,c as r,a as h,b as e,t as d,l as $,v as V,u as p,F as _,r as v,w as M,h as E,f as N,n as R}from"./app-8b08b02b.js";import{_ as S}from"./AdminLayout-2a0b7492.js";import{P as T}from"./PageHeader-f9559e85.js";import{V as w}from"./dropdown-dfddaeee.js";import"./ToastrContainer-e495c250.js";import"./toastComposable-d43a11ef.js";import"./moment-a9aaa855.js";import"./sharedComposable-7773727f.js";import"./Modal-68ba130b.js";import"./_plugin-vue_export-helper-c27b6911.js";const A={class:"container p-4 sm:p-6"},B={class:"space-y-6"},O={class:"card"},j={class:"card-body"},z={class:"mb-3"},D={for:"customCheck12",class:"toggle toggle-sm"},F=["checked"],G=e("div",{class:"toggle-body"},null,-1),q={class:"label label-md"},H=e("hr",null,null,-1),I={class:"grid grid-cols-12"},L={class:"col-span-3"},U={class:"flex items-center gap-2"},J=["onChange","checked","id","value","data-class"],K=["for"],Q=["onChange","checked","id","value"],W=["for"],X=e("br",null,null,-1),Y={class:"card-footer"},Z=e("i",{class:"fa fa-save"},null,-1),ee=N({layout:S}),me=Object.assign(ee,{__name:"Create",props:["buttons","permissions_groups"],setup(u){const m=u,t=C({permissions:[],name:null}),l=y([]),f=P(()=>m.permissions_groups.length===l.value.length),g=()=>{if(l.value=[],t.permissions.length<1){m.permissions_groups.forEach(s=>{l.value.push(s.group_name),s.permissions.forEach(n=>{t.permissions.push(n.name)})});return}t.permissions=[]},b=s=>{const n=l.value.indexOf(s);n!==-1?l.value.splice(n,1):l.value.push(s);const o=m.permissions_groups.filter(i=>l.value.includes(i.group_name)).flatMap(i=>i.permissions.map(a=>a.name));t.permissions=l.value.length>=1?o:[]},k=s=>{const n=t.permissions.indexOf(s);n!==-1?t.permissions.splice(n,1):t.permissions.push(s)},x=()=>{t.post(route("admin.role.store"),{onSuccess:()=>{t.reset(),createToast({title:"Created",description:"Role Created successfully"},{transition:"slide",position:"top-right"})}})};return(s,n)=>(c(),r("main",A,[h(T,{title:s.trans("Create Role"),buttons:u.buttons},null,8,["title","buttons"]),e("div",B,[e("div",O,[e("div",j,[e("div",z,[e("label",null,d(s.trans("Role Name")),1),$(e("input",{type:"text",class:"input",required:"",name:"name",placeholder:"sub admin","onUpdate:modelValue":n[0]||(n[0]=o=>p(t).name=o)},null,512),[[V,p(t).name]])]),h(w),e("div",null,[e("label",D,[e("input",{checked:f.value,onInput:g,class:"toggle-input peer sr-only",id:"customCheck12",type:"checkbox"},null,40,F),G,e("span",q,d(s.trans("Check All Permissions")),1)])]),H,(c(!0),r(_,null,v(u.permissions_groups,(o,i)=>(c(),r("div",{class:"mt-3",key:o.key},[e("div",I,[e("div",L,[e("div",U,[e("input",{onChange:a=>b(o.group_name),checked:l.value.includes(o.group_name),type:"checkbox",class:"checkbox",id:i+"Management",value:o.group_name,"data-class":`role-${i}-management-checkbox`},null,40,J),e("label",{class:"label",for:i+"Management"},d(o.group_name),9,K)])]),e("div",{class:R(`col-span-9 role-${i}-management-checkbox`)},[(c(!0),r(_,null,v(o.permissions,a=>(c(),r("div",{class:"flex items-center gap-2",key:a.id},[e("input",{onChange:se=>k(a.name),checked:p(t).permissions.includes(a.name),type:"checkbox",class:"checkbox",name:"permissions[]",id:`checkPermission${a.id}`,value:a.name},null,40,Q),e("label",{class:"label",for:`checkPermission${a.id}`},d(a.name),9,W)]))),128)),X],2)])]))),128))]),e("div",Y,[e("button",{onClick:M(x,["prevent"]),type:"submit",class:"btn btn-primary"},[Z,E(" "+d(s.trans("Save")),1)])])])])]))}});export{me as default};
