import{i as w,j as _,T as D,k as $,x as N,o as h,c as v,a as g,u as l,b as e,l as p,t as n,h as z,w as M,F as C,r as U,P as E,f as L,O as K,Z as R,v as F,U as A}from"./app-55c25e51.js";import{s as H}from"./sharedComposable-713147fd.js";import"./InputFieldError-c6069bf2.js";import{_ as Z}from"./AuthLayout-99377f0c.js";import{S as q}from"./SpinnerBtn-5f5f7277.js";import{S as u}from"./sweetalert2.esm.all-df3a4912.js";import"./toastComposable-bc1f97e9.js";import"./ToastrContainer-869d906f.js";import"./SeoMeta-0212affe.js";/* empty css                                                   */const G={class:"register-wrapper d-flex justify-content-center align-items-center"},J={class:"register-container d-flex position-relative"},Q={class:"top-left-logo"},W={href:"/"},X={alt:"logo"},Y={class:"register-image"},ee={alt:""},te={class:"register-form"},oe={class:"d-flex justify-content-end mb-30"},se={method:"POST",action:"#"},ne={class:"otp-card"},ae={class:"otp-title"},ie={class:"otp-text"},re={class:"otp-text"},le=["href"],ce={class:"otp-input-container"},pe=["onUpdate:modelValue","onInput","onKeydown"],ue={class:"resend-text"},de={class:"resend-otp"},fe=["disabled"],me=L({layout:Z}),Ve=Object.assign(me,{__name:"VerifyOtp",props:{status:String,otpInfo:{type:Object,default:{remaining:0,phone:null}},authPages:Object,flash:Object},setup(d){var y;const{authUser:_e,logout:k,uiAvatar:he}=H(),o=d;w(()=>{o.flash&&o.flash.message&&u.fire({icon:o.flash.type==="success"?"success":"error",title:`<h2 style='font-size: 20px;'>${o.flash.message}</h2>`,confirmButtonText:"Okay",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"},didOpen:t=>{const s=document.createElement("button");s.innerHTML="&times;",s.classList.add("swal-close-btn"),s.onclick=()=>u.close(),t.appendChild(s)}})});const a=_(["","","","","",""]),f=_([]),T=t=>{a.value[t]&&t<5&&f.value[t+1].focus(),c.otp_code=a.value.join("")},S=t=>{!a.value[t]&&t>0&&f.value[t-1].focus()},V=((y=o.authPages)==null?void 0:y.login)??{},c=D({otp_code:""}),i=_(o.otpInfo.remaining);w(()=>{i.value>0&&setInterval(()=>{i.value>0&&(i.value=Math.floor(i.value-1))},1e3),setTimeout(()=>{o.status=""},5e3)});const P=()=>{c.otp_code=a.value.join(""),c.post(route("otp.verification.store"),{preserveScroll:!0,onSuccess:t=>{var s;(s=o.flash)!=null&&s.message&&u.fire({icon:o.flash.type==="success"?"success":"error",title:`<h2 style='font-size: 20px;'>${o.flash.message}</h2>`,confirmButtonText:"Okay",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"}})},onError:t=>{t.otp_code&&u.fire({icon:"error",title:`<h2 style='font-size: 20px;'>${t.otp_code}</h2>`,confirmButtonText:"Okay",allowOutsideClick:!1,customClass:{popup:"custom-swal-popup"}})}})},j=route("phone.verification.index"),x=()=>{K.get(route("phone.verification.index"))};return(t,s)=>{var O;const I=$("Icon"),b=N("lazy");return h(),v(C,null,[g(l(R),{title:"OTP Verification"}),e("div",G,[e("div",J,[e("div",Q,[e("a",W,[p(e("img",X,null,512),[[b,(O=t.$page.props.primaryData)==null?void 0:O.deep_logo]])])]),e("div",Y,[p(e("img",ee,null,512),[[b,l(V).image2]])]),e("div",te,[e("div",oe,[e("form",se,[e("button",{type:"button",onClick:s[0]||(s[0]=B=>l(k)()),class:"signin-button"},[g(I,{icon:"fe:logout"}),e("span",null,n(t.trans("Logout")),1)])])]),e("div",ne,[e("h4",ae,n(t.trans("OTP Verification")),1),e("p",ie,n(t.trans("Enter OTP Code sent to"))+" "+n(d.otpInfo.country_code)+" ******"+n((d.otpInfo.phone??"").toString().slice(-4)),1),e("p",re,[z(n(t.trans("Not your number"))+" ",1),e("a",{class:"resend-btn",href:l(j)},"Change Number",8,le)]),e("form",{onSubmit:M(P,["prevent"])},[e("div",ce,[(h(!0),v(C,null,U(a.value,(B,r)=>p((h(),v("input",{key:r,"onUpdate:modelValue":m=>a.value[r]=m,ref_for:!0,ref_key:"otpRefs",ref:f,type:"text",class:"otp-input",maxlength:"1",pattern:"[0-9]",inputmode:"numeric",onInput:m=>T(r),onKeydown:A(m=>S(r),["backspace"])},null,40,pe)),[[F,a.value[r]]])),128))]),e("p",ue,n(t.trans("Didnâ€™t receive OTP code?")),1),e("p",de,[e("button",{type:"button",disabled:i.value>1,onClick:x,class:"resend-btn"},n(t.trans("Resend Code")),9,fe),p(e("span",{class:"countdown"},"("+n(i.value)+"s)",513),[[E,i.value>1]])]),g(q,{processing:l(c).processing,"btn-text":t.trans("Verify & Proceed"),class:"signin-btn w-100"},null,8,["processing","btn-text"])],32)])])])])],64)}}});export{Ve as default};
