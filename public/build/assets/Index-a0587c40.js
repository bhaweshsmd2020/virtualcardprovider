import{j as k,T as G,k as I,x as S,o as i,c as d,a as N,u as m,b as e,l as u,F as _,r as x,t,v as h,h as p,p as U,f as A,Z as B,n as L,P as V,w as M,e as b,O as D}from"./app-55c25e51.js";import{t as E}from"./toastComposable-bc1f97e9.js";import{_ as O}from"./BlankLayout-ea472297.js";import{s as $}from"./sharedComposable-713147fd.js";import"./ToastrContainer-869d906f.js";const j={class:"payment-container"},F={class:"payment-content"},Y={class:"payment-header"},Z={class:"rounded-full",alt:"logo"},H={class:"gateways"},J=["onClick"],K=e("svg",{class:"active-gateway",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})],-1),Q=[K],R={class:"mb-3 text-gray-900"},W={class:"text-sm text-gray-900"},X=["id"],ee=["onSubmit"],te={class:"payment-table"},ne={class:"text-center"},se={key:0},le={class:"text-center"},ae={key:1},oe={class:"text-center"},re={class:"text-center"},ie={class:"payment-label"},de={key:1,class:"text-gray-900"},ue={class:"payment-label"},ce={class:"text-gray-900"},me={class:"payment-label"},pe={class:"my-2 text-gray-900"},he={class:"payment-label"},ve={class:"text-gray-900"},ye={class:"payment-label"},_e=["disabled"],be=e("br",null,null,-1),fe={class:"payment-invoice"},ge={class:"payment-border"},ke=e("br",null,null,-1),Ce=e("br",null,null,-1),we={class:"payment-border"},Ne=e("br",null,null,-1),xe=e("br",null,null,-1),Ve=e("br",null,null,-1),qe={class:"payment-details"},Pe={class:"payment-table"},Te={class:"text-center"},ze=A({layout:O}),Be=Object.assign(ze,{__name:"Index",props:["gateways","invoice_data","user"],setup(a){var C;const{formatCurrency:v,uiAvatar:q}=$(),f=a,y=k(((C=f.gateways[0])==null?void 0:C.id)||0),c=k(0),o=k({note:"",name:"",email:"",phone:""}),P=G({}),T=n=>{const l=f.gateways.find(g=>g.id===n);if(l.min_amount>c.value){E.danger("The minimum transaction amount is "+v(l.value.min_amount));return}D.post(route("qr-top-up.store"),{gateway_id:n,total:c.value,uuid:f.user.uuid,senderInfo:o.value,phone:l.phone_required==1?o.value.phone:null})},z=n=>{y.value=n};return(n,l)=>{const g=I("Link"),w=S("lazy");return i(),d(_,null,[N(m(B),{title:n.trans("Payment")},null,8,["title"]),e("div",j,[e("div",F,[e("div",Y,[u(e("img",Z,null,512),[[w,m(q)(a.user.first_name,a.user.avatar)]])]),e("div",H,[(i(!0),d(_,null,x(a.gateways,s=>(i(),d("button",{key:s.id,onClick:r=>z(s.id),class:L({"payment-border":y.value==s.id})},[u(e("div",null,Q,512),[[V,y.value==s.id]]),u(e("img",null,null,512),[[w,s.logo]])],10,J))),128))]),e("div",R,[e("label",W,t(n.trans("Amount")),1),u(e("input",{type:"number",required:"","onUpdate:modelValue":l[0]||(l[0]=s=>c.value=s),maxlength:"10",class:"block w-full rounded-md px-2 py-1.5 focus:border-primary-600"},null,512),[[h,c.value]])]),(i(!0),d(_,null,x(a.gateways,s=>u((i(),d("div",{key:s.id,class:"gateway-form",id:"gateway-form"+s.id},[e("form",{method:"post",onSubmit:M(r=>T(s.id),["prevent"]),enctype:"multipart/form-data"},[e("table",te,[e("tr",null,[e("td",null,t(n.trans("Method Name: ")),1),e("td",ne,t(s.name),1)]),s.currency!=null?(i(),d("tr",se,[e("td",null,t(n.trans("Gateway Currency: ")),1),e("td",le,t(s.currency),1)])):b("",!0),s.charge!=0?(i(),d("tr",ae,[e("td",null,t(n.trans("Gateway Charge: ")),1),e("td",oe,t(m(v)(s.charge)),1)])):b("",!0),e("tr",null,[e("td",null,t(n.trans("Payable Amount: ")),1),e("td",re,t(m(v)(c.value*s.multiply+s.charge)),1)])]),s.comment!=null?(i(),d(_,{key:0},[e("p",ie,[e("b",null,t(n.trans("Payment Instruction: ")),1)]),e("p",null,t(s.comment),1)],64)):b("",!0),s.phone_required==1?(i(),d("div",de,[e("label",ue,t(n.trans("Your phone number")),1),u(e("input",{type:"tel",name:"phone",placeholder:"Your phone number",class:"payment-input rounded-md py-1.5","onUpdate:modelValue":l[1]||(l[1]=r=>o.value.phone=r)},null,512),[[h,o.value.phone]])])):b("",!0),e("div",ce,[e("label",me,t(n.trans("Name")),1),u(e("input",{class:"block w-full rounded-md px-2 py-1.5 focus:border-primary-600","onUpdate:modelValue":l[2]||(l[2]=r=>o.value.name=r),required:"",placeholder:"Name"},null,512),[[h,o.value.name]])]),e("div",pe,[e("label",he,t(n.trans("Email")),1),u(e("input",{class:"block w-full rounded-md px-2 py-1.5 focus:border-primary-600",type:"email","onUpdate:modelValue":l[3]||(l[3]=r=>o.value.email=r),required:"",placeholder:"Email"},null,512),[[h,o.value.email]])]),e("div",ve,[e("label",ye,t(n.trans("Note")),1),u(e("textarea",{class:"payment-textarea border border-gray-400 focus:border-primary-600","onUpdate:modelValue":l[4]||(l[4]=r=>o.value.note=r),required:"",name:"Note",placeholder:"Note",maxlength:"500"},null,512),[[h,o.value.note]])]),e("button",{disabled:m(P).processing,type:"submit",class:"payment-pay-btn mt-6"},t(n.trans("Pay Now")),9,_e)],40,ee)],8,X)),[[V,y.value===s.id]])),128)),be,e("div",fe,[e("div",ge,[e("b",null,t(n.trans("Invoiced To")),1),ke,p(" "+t(a.user.name),1),Ce,p(" "+t(a.user.address),1)]),e("div",we,[e("b",null,t(n.trans("Pay To")),1),Ne,p(" "+t(a.invoice_data.company_name)+" ",1),xe,p(" "+t(a.invoice_data.address)+", "+t(a.invoice_data.city)+" ",1),Ve,p(" "+t(a.invoice_data.post_code)+", "+t(a.invoice_data.country),1)])]),e("div",qe,[e("table",Pe,[e("tr",null,[e("td",null,[e("b",null,t(n.trans("Name")),1)])]),e("tr",null,[e("td",null,t(a.user.name),1)]),e("tr",null,[e("td",null,t(n.trans("Total"))+" :",1),e("td",Te,t(m(v)(+c.value)),1)])])]),N(g,{href:"user/subscription",class:"payment-cancel-btn"},{default:U(()=>[p(t(n.trans("Cancel Payment")),1)]),_:1})])])],64)}}});export{Be as default};
